(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{430:function(s,a,n){"use strict";n.r(a);var t=n(1),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mysql-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-安装"}},[s._v("#")]),s._v(" MySQL 安装")]),s._v(" "),a("h2",{attrs:{id:"_1-使用yum-apt进行安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用yum-apt进行安装"}},[s._v("#")]),s._v(" 1. 使用YUM/APT进行安装")]),s._v(" "),a("p",[s._v("安装前，请查看您的操作系统版本和内核版本：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示主机的硬件架构信息")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://static.xiaoliutalk.cn/img/1.png",alt:"1"}})]),s._v(" "),a("p",[s._v("选择相应的分发版进行安装，注意选择 "),a("code",[s._v("MySQL")]),s._v(" 版本。")]),s._v(" "),a("h3",{attrs:{id:"_1-1-添加yum-apt仓库文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-添加yum-apt仓库文件"}},[s._v("#")]),s._v(" 1.1. 添加YUM/APT仓库文件")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://dev.mysql.com/downloads/",title:"https://dev.mysql.com/downloads/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/downloads/"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这里以 "),a("code",[s._v("Rocky Linux 9")]),s._v(" 为例子进行测试，系统具体版本请参照上文图片进行。")]),s._v(" "),a("p",[s._v("这里选择 "),a("code",[s._v("MySQL Yum Repository")]),s._v("：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://static.xiaoliutalk.cn/img/202211161109569.png",alt:""}})]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://static.xiaoliutalk.cn/img/202211161106761.png"}}),s._v(" "),a("p",[a("img",{attrs:{src:"https://static.xiaoliutalk.cn/img/202211161110673.png",alt:""}})]),s._v(" "),a("p",[s._v("下载到用户家目录并安装：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-SL")]),s._v(" https://dev.mysql.com/get/mysql80-community-release-el9-1.noarch.rpm "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" ~/mysql80-community-release-el9-1.noarch.rpm\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ivh")]),s._v(" mysql80-community-release-el9-1.noarch.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_1-2-yum安装mysql-8-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-yum安装mysql-8-0"}},[s._v("#")]),s._v(" 1.2. YUM安装MySQL 8.0")]),s._v(" "),a("p",[s._v("根据上面的选择对应的系统版本进行安装。")]),s._v(" "),a("h4",{attrs:{id:"_1-2-1-查看安装仓库文件是否成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-查看安装仓库文件是否成功"}},[s._v("#")]),s._v(" 1.2.1. 查看安装仓库文件是否成功")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum repolist enabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql.*-community.*'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_1-2-2-查看系统自带mysql-mariadb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-查看系统自带mysql-mariadb"}},[s._v("#")]),s._v(" 1.2.2. 查看系统自带mysql/mariadb")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qa")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" maria\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qa")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"_1-2-3-卸载可能冲突的软件包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-卸载可能冲突的软件包"}},[s._v("#")]),s._v(" 1.2.3. 卸载可能冲突的软件包")]),s._v(" "),a("p",[s._v("根据情况进行判断，如上文安装的 "),a("code",[s._v("mysql80-community-release-el9-1.noarch.rpm")]),s._v(" 这个可能会出现在列表里，如果没有查找到其他的包就不需要执行此步骤。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" remove mysql*\nyum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" remove maria*\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"_1-2-4-安装mysql-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-4-安装mysql-server"}},[s._v("#")]),s._v(" 1.2.4. 安装mysql-server")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_1-2-5-启动数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-5-启动数据库"}},[s._v("#")]),s._v(" 1.2.5. 启动数据库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl start mysqld\nsystemctl status mysqld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置mysql开机启动")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mysqld\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"_2-使用二进制进行安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用二进制进行安装"}},[s._v("#")]),s._v(" 2. 使用二进制进行安装")]),s._v(" "),a("p",[s._v("YUM/APT进行安装可能会出现与其他已安装软件冲突的情况，并且会要求安装其他一些依赖项，这个时候我们可以选择通过官方给出的二进制文件进行安装。")]),s._v(" "),a("p",[s._v("如果需要其他版本可以去官方网站下载"),a("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/downloads/mysql/"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这里我们以 "),a("code",[s._v("MySQL Community Server 5.7.33")]),s._v(" 进行示例安装：")]),s._v(" "),a("h3",{attrs:{id:"_2-1-基于yum的系统-二进制安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-基于yum的系统-二进制安装mysql"}},[s._v("#")]),s._v(" 2.1. 基于YUM的系统 二进制安装MySQL")]),s._v(" "),a("h4",{attrs:{id:"_2-1-1-安装libaio依赖库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-安装libaio依赖库"}},[s._v("#")]),s._v(" 2.1.1. 安装libaio依赖库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libaio libaio-devel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-2-2-从mysql官方网站下载mysql二进制文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-从mysql官方网站下载mysql二进制文件"}},[s._v("#")]),s._v(" 2.2.2. 从MySQL官方网站下载MySQL二进制文件")]),s._v(" "),a("p",[s._v("MySQL下载地址"),a("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/downloads/mysql/"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这里选择 "),a("strong",[s._v("MySQL Community Server")]),s._v("：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://static.xiaoliutalk.cn/img/202211161317266.png",alt:""}})]),s._v(" "),a("p",[s._v("选择 "),a("strong",[s._v("Archived")]),s._v("，"),a("strong",[s._v("Operating System")]),s._v(" 下拉框选择 "),a("strong",[s._v("Linux - Generic")]),s._v("，版本选择 "),a("strong",[s._v("5.7.33")]),s._v(" ：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://static.xiaoliutalk.cn/img/202211161326666.png",alt:""}})]),s._v(" "),a("p",[s._v("下载到用户家目录：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-SL")]),s._v(" https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.33-linux-glibc2.12-x86_64.tar.gz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" ~/mysql-5.7.33-linux-glibc2.12-x86_64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-2-3-添加mysql用户和组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-添加mysql用户和组"}},[s._v("#")]),s._v(" 2.2.3. 添加mysql用户和组")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /bin/false mysql "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建不可登录用户")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"_2-2-4-解压到对应目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-解压到对应目录"}},[s._v("#")]),s._v(" 2.2.4. 解压到对应目录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf ~/mysql-5.7.33-linux-glibc2.12-x86_64.tar.gz \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" mysql-5.7.33-linux-glibc2.12-x86_64 mysql "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 制作符号链接，如果要进行版本更新的话，只需要更改符号链接就好")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"_2-2-5-将目录导入到环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-5-将目录导入到环境变量"}},[s._v("#")]),s._v(" 2.2.5. 将目录导入到环境变量")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("$PATH")]),s._v("：决定了shell将到哪些目录中寻找命令或程序，PATH的值是一系列目录，当您运行一个程序时，Linux在这些目录下进行搜寻编译链接。")])]),s._v(" "),a("p",[s._v("修改$PATH的方法有很多，比如：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(":/usr/local/mysql/bin\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("但是这种方式修改的环境变量，在终端关闭后就会失效，所以不推荐此方式进行修改。")]),s._v(" "),a("p",[s._v("第二种：编辑"),a("code",[s._v("/etc/profile")]),s._v("文件，进行修改环境变量：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'EOF'"),a("span",{pre:!0,attrs:{class:"token bash punctuation"}},[s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/profile")]),s._v("\nMYSQL_HOME=/usr/local/mysql\nPATH=$PATH:$MYSQL_HOME/bin\nexport PATH MYSQL_HOME\nEOF")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h4",{attrs:{id:"_2-2-6-设置my-cnf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-6-设置my-cnf"}},[s._v("#")]),s._v(" 2.2.6. 设置my.cnf")]),s._v(" "),a("p",[s._v("参考博客："),a("a",{attrs:{href:"https://blog.csdn.net/vic_qxz/article/details/82223520",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL的my.cnf文件（解决5.7.18下没有my-default.cnf）"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF"),a("span",{pre:!0,attrs:{class:"token bash punctuation"}},[s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/my.cnf")]),s._v("\n[client]\nport = 3306\nsocket = /tmp/mysql.sock\n[mysqld]\n###############################基础设置#####################################\n#Mysql服务的唯一编号 每个mysql服务Id需唯一\nserver-id = 1\n#服务端口号 默认3306\nport = 3306\n#mysql安装根目录\nbasedir = /usr/local/mysql\n#mysql数据文件所在位置\ndatadir = /usr/local/mysql/data\n#临时目录 比如load data infile会用到\ntmpdir  = /tmp\n#设置socke文件所在目录\nsocket  = /tmp/mysql.sock\n#主要用于MyISAM存储引擎,如果多台服务器连接一个数据库则建议注释下面内容\nskip-external-locking\n#只能用IP地址检查客户端的登录，不用主机名\nskip_name_resolve = 1\n#事务隔离级别，默认为可重复读，mysql默认可重复读级别（此级别下可能参数很多间隙锁，影响性能）\ntransaction_isolation = READ-COMMITTED\n#数据库默认字符集,主流字符集支持一些特殊表情符号（特殊表情符占用4个字节）\ncharacter-set-server = utf8mb4\n#数据库字符集对应一些排序等规则，注意要和character-set-server对应\ncollation-server = utf8mb4_general_ci\n#设置client连接mysql时的字符集,防止乱码\ninit_connect='SET NAMES utf8mb4'\n#是否对sql语句大小写敏感，1表示不敏感\nlower_case_table_names = 1\n#最大连接数\nmax_connections = 800\n#最大错误连接数\nmax_connect_errors = 1000\n#TIMESTAMP如果没有显示声明NOT NULL，允许NULL值\nexplicit_defaults_for_timestamp = true\n#SQL数据包发送的大小，如果有BLOB对象建议修改成1G\nmax_allowed_packet = 128M\n#MySQL连接闲置超过一定时间后(单位：秒)将会被强行关闭\n#MySQL默认的wait_timeout  值为8个小时, interactive_timeout参数需要同时配置才能生效\ninteractive_timeout = 1800\nwait_timeout = 1800\n#内部内存临时表的最大值 ，设置成128M。\n#比如大数据量的group by ,order by时可能用到临时表，\n#超过了这个值将写入磁盘，系统IO压力增大\ntmp_table_size = 134217728\nmax_heap_table_size = 134217728\n#禁用mysql的缓存查询结果集功能\n#后期根据业务情况测试决定是否开启\n#大部分情况下关闭下面两项\nquery_cache_size = 0\nquery_cache_type = 0\n#####################用户进程分配到的内存设置BEGIN#############################\n##每个session将会分配参数设置的内存大小\n#用于表的顺序扫描，读出的数据暂存于read_buffer_size中，当buff满时或读完，将数据返回上层调用者\n#一般在128kb ~ 256kb,用于MyISAM\n#read_buffer_size = 131072\n#用于表的随机读取，当按照一个非索引字段排序读取时会用到，\n#一般在128kb ~ 256kb,用于MyISAM\n#read_rnd_buffer_size = 262144\n#order by或group by时用到\n#建议先调整为2M，后期观察调整\nsort_buffer_size = 2097152\n#一般数据库中没什么大的事务，设成1~2M，默认32kb\nbinlog_cache_size = 524288\n########################用户进程分配到的内存设置END############################\n#在MySQL暂时停止响应新请求之前的短时间内多少个请求可以被存在堆栈中\n#官方建议back_log = 50 + (max_connections / 5),封顶数为900\nback_log = 130\n############################日志设置##########################################\n#数据库错误日志文件\nlog_error = error.log\n#慢查询sql日志设置\nslow_query_log = 1\nslow_query_log_file = slow.log\n#检查未使用到索引的sql\nlog_queries_not_using_indexes = 1\n#针对log_queries_not_using_indexes开启后，记录慢sql的频次、每分钟记录的条数\nlog_throttle_queries_not_using_indexes = 5\n#作为从库时生效,从库复制中如何有慢sql也将被记录\nlog_slow_slave_statements = 1\n#慢查询执行的秒数，必须达到此值可被记录\nlong_query_time = 8\n#检索的行数必须达到此值才可被记为慢查询\nmin_examined_row_limit = 100\n#mysql binlog日志文件保存的过期时间，过期后自动删除\nexpire_logs_days = 5\n############################主从复制设置#####################################\n#开启mysql binlog功能\nlog-bin=mysql-bin\n#binlog记录内容的方式，记录被操作的每一行\nbinlog_format = ROW\n#对于binlog_format = ROW模式时，减少记录日志的内容，只记录受影响的列\nbinlog_row_image = minimal\n#master status and connection information输出到表mysql.slave_master_info中\nmaster_info_repository = TABLE\n#the slave's position in the relay logs输出到表mysql.slave_relay_log_info中\nrelay_log_info_repository = TABLE\n#作为从库时生效,想进行级联复制，则需要此参数\nlog_slave_updates\n#作为从库时生效,中继日志relay-log可以自我修复\nrelay_log_recovery = 1\n#作为从库时生效,主从复制时忽略的错误\nslave_skip_errors = ddl_exist_errors\n############################其他设置########################################\n[mysqldump]\nquick\nmax_allowed_packet = 128M\n[mysql]\nno-auto-rehash\n[myisamchk]\nkey_buffer_size = 20M\nsort_buffer_size = 256k\nread_buffer = 2M\nwrite_buffer = 2M\n[mysqlhotcopy]\ninteractive-timeout\n[mysqld_safe]\n#增加每个进程的可打开文件数量\nopen-files-limit = 28192\nEOF")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br")])]),a("h4",{attrs:{id:"_2-2-7-创建必要目录-并更改所有权为mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-7-创建必要目录-并更改所有权为mysql"}},[s._v("#")]),s._v(" 2.2.7. 创建必要目录，并更改所有权为mysql")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" mysql-files\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" mysql:mysql mysql-files\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("750")]),s._v(" mysql-files\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_2-2-8-初始化mysql-并生成临时密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-8-初始化mysql-并生成临时密码"}},[s._v("#")]),s._v(" 2.2.8. 初始化MySQL，并生成临时密码")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql\nbin/mysqld --defaults-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/my.cnf "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--initialize")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql会生成临时密码，最好记下此密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /usr/local/mysql/data/error.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" password "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看mysql初始化密码")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_2-2-9-复制启动脚本到init-d中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-9-复制启动脚本到init-d中"}},[s._v("#")]),s._v(" 2.2.9. 复制启动脚本到init.d中")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /etc/init.d\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" support-files/mysql.server /etc/init.d/mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2-2-systemd集成mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-systemd集成mysql"}},[s._v("#")]),s._v(" 2.2. systemd集成MySQL")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("Systemd")]),s._v("是一个系统管理守护进程、工具和库的集合，用于取代System V初始进程。Systemd的功能是用于集中管理和配置类UNIX系统。 "),a("strong",[s._v("Systemctl")]),s._v("是一个systemd工具，主要负责控制systemd系统和服务管理器。")])]),s._v(" "),a("p",[s._v("如果使用YUM/APT安装mysql的话，会自动生成 "),a("code",[s._v("systemd")]),s._v(" 目录，而二进制文件安装的话，系统中并没有集成，建议手动添加 "),a("code",[s._v("systemd")]),s._v(" 选项。")]),s._v(" "),a("h4",{attrs:{id:"_2-2-1-创建systemd服务单元配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-创建systemd服务单元配置文件"}},[s._v("#")]),s._v(" 2.2.1. 创建systemd服务单元配置文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /usr/lib/systemd/system/mysqld.service\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("644")]),s._v(" /usr/lib/systemd/system/mysqld.service\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'EOF'"),a("span",{pre:!0,attrs:{class:"token bash punctuation"}},[s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/lib/systemd/system/mysqld.service")]),s._v("\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\n\n# Have mysqld write its state to the systemd notify socket\n#Type=notify\n\n# Disable service start and stop timeout logic of systemd for mysqld service.\nTimeoutSec=0\n\n# Start main service\nExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf $MYSQLD_OPTS \n\n# Use this to switch malloc implementation\nEnvironmentFile=-/etc/sysconfig/mysql\n\n# Sets open_files_limit\nLimitNOFILE = 10000\n\nRestart=on-failure\n\nRestartPreventExitStatus=1\n\n# Set environment variable MYSQLD_PARENT_PID. This is required for restart.\nEnvironment=MYSQLD_PARENT_PID=1\n\nPrivateTmp=false\nEOF")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br")])]),a("h4",{attrs:{id:"_2-2-2-重新加载systemd配置-并启动mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-重新加载systemd配置-并启动mysql"}},[s._v("#")]),s._v(" 2.2.2. 重新加载systemd配置，并启动mysql")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl daemon-reload\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动mysql")]),s._v("\nsystemctl start mysqld\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_3-mysql-启动-关闭-重启-修改root密码等操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-mysql-启动-关闭-重启-修改root密码等操作"}},[s._v("#")]),s._v(" 3. MySQL 启动，关闭，重启，修改root密码等操作")]),s._v(" "),a("h3",{attrs:{id:"_3-1-mysql-启动-关闭-重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-mysql-启动-关闭-重启"}},[s._v("#")]),s._v(" 3.1. MySQL 启动，关闭，重启")]),s._v(" "),a("p",[s._v("如果您进行上一步的话，那就可以通过 "),a("code",[s._v("systemctl")]),s._v(" 进行管理mysql服务的启动，关闭，重启等操作。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动mysql")]),s._v("\nsystemctl start mysqld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止mysql")]),s._v("\nsystemctl stop mysqld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启mysql")]),s._v("\nsystemctl restart mysqld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机启动mysql")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mysqld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭开机启动")]),s._v("\nsystemctl disable mysqld\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("查看mysql服务是否已经开机启动：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl is-enabled mysqld\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-2-修改root密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-修改root密码"}},[s._v("#")]),s._v(" 3.2. 修改root密码")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ALTER "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-3-使root帐号允许从远程登陆"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-使root帐号允许从远程登陆"}},[s._v("#")]),s._v(" 3.3. 使root帐号允许从远程登陆")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("use mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nupdate user "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" where "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush privileges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host,user from user where "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);