(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{454:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"网络设备配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络设备配置"}},[t._v("#")]),t._v(" 网络设备配置")]),t._v(" "),s("h2",{attrs:{id:"_15-网络设备配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-网络设备配置"}},[t._v("#")]),t._v(" 15. 网络设备配置")]),t._v(" "),s("h3",{attrs:{id:"_15-1-网络设备基本配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-1-网络设备基本配置"}},[t._v("#")]),t._v(" 15.1. 网络设备基本配置")]),t._v(" "),s("p",[t._v("网络设备的操作系统：")]),t._v(" "),s("ul",[s("li",[t._v("华为设备："),s("strong",[t._v("VRP")]),t._v(" (Versatile Routing Platform，通用路由平台），常用的有两个版本VRP5和VRP8。")]),t._v(" "),s("li",[t._v("思科设备："),s("strong",[t._v("IOS")]),t._v("（internetwork operating system）")])]),t._v(" "),s("p",[t._v("常见的三种设备配置方式：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("console方式")]),t._v("：适合没有IP地址的网络设备， 通过console线缆与PC的com口相连，通过超级终端软件登录设备， 以命令行的方式实现配置。最常见的方式，使用console方式配置时，COM口的属性要与网络设备的属性向匹配。COM口的"),s("strong",[t._v("数据速率为9600b/s")]),t._v(" 。")]),t._v(" "),s("li",[s("strong",[t._v("telnet方式")]),t._v("：适合有IP地址的网络设备，并确保PC与网络设备的连通性。")]),t._v(" "),s("li",[s("strong",[t._v("Web方式")]),t._v("：适合有IP地址的网络设备，并内置有WEB页面。")])]),t._v(" "),s("p",[t._v("COM口设置：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.xiaoliutalk.cn/img/202210251631120.png",alt:""}})]),t._v(" "),s("p",[t._v("内存：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ROM （只读存储器，Read-Only Memory )")]),t._v("： 用于存放启动程序。"),s("strong",[t._v("操作系统的引导程序")]),t._v("。")]),t._v(" "),s("li",[s("strong",[t._v("Flash （快闪存储器，Flash Memory )")]),t._v("：用于"),s("strong",[t._v("存放操作系统")]),t._v("。")]),t._v(" "),s("li",[s("strong",[t._v("RAM（随机存储器，Random Access Memory）")]),t._v("： 可读可写的随机存储器，掉电数据消失，存放设备运行过程中产生的数据。")]),t._v(" "),s("li",[s("strong",[t._v("NVRAM（非易失性随机存储器，Non-Volatile Random Access Memory）")]),t._v("：断电后仍能保持数据的一种RAM。用于"),s("strong",[t._v("存放启动配置文件( saved-configuration )")]),t._v("。")])]),t._v(" "),s("p",[t._v("指示灯提示判断：")]),t._v(" "),s("ul",[s("li",[t._v("灯灭：代表对应功能未启用。")]),t._v(" "),s("li",[t._v("绿色常亮：代表对应功能正常运行。")]),t._v(" "),s("li",[t._v("红色常亮：代表报警或出现故障。")])]),t._v(" "),s("p",[t._v("常见指示灯：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("PWR电源灯：绿色常亮代表正常。")])]),t._v(" "),s("li",[s("p",[t._v("SYS系统运行状态灯：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("灭：系统未运行。")])]),t._v(" "),s("li",[s("p",[t._v("常绿：正常运行（慢闪）；升级（快闪）。")])]),t._v(" "),s("li",[s("p",[t._v("红色：不正常（常亮）；出错（闪烁）。")])])])]),t._v(" "),s("li",[s("p",[t._v("ETH以太网接口灯：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("灭：接口无连接。")])]),t._v(" "),s("li",[s("p",[t._v("常亮（绿）：有连接。")])]),t._v(" "),s("li",[s("p",[t._v("闪烁（绿）：传输数据。")])])])]),t._v(" "),s("li",[s("p",[t._v("STCK（stack模式状态灯）：")]),t._v(" "),s("ul",[s("li",[t._v("灭：未选择stack模式。")]),t._v(" "),s("li",[t._v("常亮（绿）：指示stack信息。")])])])]),t._v(" "),s("p",[t._v("配置文件：")]),t._v(" "),s("p",[t._v("运行配置文件： 当前配置文件，"),s("strong",[t._v("已保存或尚未保存")]),t._v("的文件。")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("current-configuration （华为）\nrunning-config （思科）\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("启动配置文件： 执行保存命令后的启动配置文件。")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("saved-configuration （华为）\nstartup-config （思科）\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("保存当前配置到启动配置命令：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("save （华为）\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),t._v(" （思科）\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"_15-2-网络设备基本配置命令-华为"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-网络设备基本配置命令-华为"}},[t._v("#")]),t._v(" 15.2. 网络设备基本配置命令（华为）")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://static.xiaoliutalk.cn/img/202210251734895.jpg"}}),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("视图")]),t._v(" "),s("th",[t._v("功能")]),t._v(" "),s("th",[t._v("提示符")]),t._v(" "),s("th",[t._v("进入命令")]),t._v(" "),s("th",[t._v("退出命令")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("用户视图")]),t._v(" "),s("td",[t._v("查看交换机的简单运行状态和统计信息")]),t._v(" "),s("td",[s("Huawei")],1),t._v(" "),s("td",[t._v("默认视图")]),t._v(" "),s("td",[t._v("quit")])]),t._v(" "),s("tr",[s("td",[t._v("系统视图")]),t._v(" "),s("td",[t._v("配置系统参数")]),t._v(" "),s("td",[t._v("[Huawei]")]),t._v(" "),s("td",[t._v("system-view")]),t._v(" "),s("td",[t._v("quit或者return返回用户视图")])]),t._v(" "),s("tr",[s("td",[t._v("以太网端口视图")]),t._v(" "),s("td",[t._v("配置以太网端口参数")]),t._v(" "),s("td",[t._v("[Huawei-Ethernet0/0/1]")]),t._v(" "),s("td",[t._v("在系统视图下输入 interface Ethernet0/0/1")]),t._v(" "),s("td",[t._v("quit或者return返回用户视图")])]),t._v(" "),s("tr",[s("td",[t._v("Vlan视图")]),t._v(" "),s("td",[t._v("配置Vlan参数")]),t._v(" "),s("td",[t._v("[Huawei-vlan1]")]),t._v(" "),s("td",[t._v("在系统视图下输入 vlan 1")]),t._v(" "),s("td",[t._v("quit或者return返回用户视图")])]),t._v(" "),s("tr",[s("td",[t._v("Vlan接口视图")]),t._v(" "),s("td",[t._v("配置Vlan接口参数")]),t._v(" "),s("td",[t._v("[Huawei-Vlanif10]")]),t._v(" "),s("td",[t._v("在系统视图下输入 interface Vlanif 10")]),t._v(" "),s("td",[t._v("quit或者return返回用户视图")])]),t._v(" "),s("tr",[s("td",[t._v("Vty用户界面视图")]),t._v(" "),s("td",[t._v("配置单个或多个vty用户界面参数")]),t._v(" "),s("td",[t._v("[Huawei-ui-vty1][Huawei-ui-vty1-3]")]),t._v(" "),s("td",[t._v("在系统视图下输入 user-interface vty 1或者 user-interface vty 1 3")]),t._v(" "),s("td",[t._v("quit或者return返回用户视图")])]),t._v(" "),s("tr",[s("td",[t._v("console用户界面视图")]),t._v(" "),s("td",[t._v("配置console用户界面视图")]),t._v(" "),s("td",[t._v("[Huawei-ui-console0]")]),t._v(" "),s("td",[t._v("在系统视图下输入 user-interface console 0")]),t._v(" "),s("td",[t._v("quit或者return返回用户视图")])]),t._v(" "),s("tr",[s("td",[t._v("RIP/ospf协议视图")]),t._v(" "),s("td",[t._v("配置RIP/ospf路由协议参数")]),t._v(" "),s("td",[t._v("[Huawei-rip-1][Huawei-ospf-1]")]),t._v(" "),s("td",[t._v("在系统视图下输入 rip/ospf")]),t._v(" "),s("td",[t._v("quit或者return返回用户视图")])]),t._v(" "),s("tr",[s("td",[t._v("基本/高级ACL视图")]),t._v(" "),s("td",[t._v("配置ACL协议控制列表")]),t._v(" "),s("td",[t._v("[Huawei-acl-basic-2100][Huawei-acl-adv-3000]")]),t._v(" "),s("td",[t._v("在系统视图下输入 acl 2100|acl 3000")]),t._v(" "),s("td",[t._v("quit或者return返回用户视图")])])])]),t._v(" "),s("p",[s("strong",[t._v("华为设备的用户级别")]),t._v("：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("用户级别")]),t._v(" "),s("th",[t._v("命令级别")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("0（参观级）")]),t._v(" "),s("td",[t._v("0")]),t._v(" "),s("td",[t._v("网络诊断类命令（ping、tracert），从本设备访问其他设备命令（telnet）等。")])]),t._v(" "),s("tr",[s("td",[t._v("1（监控级）")]),t._v(" "),s("td",[t._v("0、1")]),t._v(" "),s("td",[t._v("系统维护命令，比如display命令。")])]),t._v(" "),s("tr",[s("td",[t._v("2（配置级）")]),t._v(" "),s("td",[t._v("0、1、2、")]),t._v(" "),s("td",[t._v("业务配置命令")])]),t._v(" "),s("tr",[s("td",[t._v("3~15（管理级）在不改变命令级别的前提下，可以理解为3-15用户权限相同")]),t._v(" "),s("td",[t._v("0、1、2、3")]),t._v(" "),s("td",[t._v("涉及系统基本运行的命令，故障诊断命令debugging命令，还有部分display命令 current-configuration 和 saved-configuration")])])])]),t._v(" "),s("p",[t._v("常见display命令汇总：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("display current-configuration\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 系统当前配置信息")]),t._v("\ndisplay saved-configuration\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 系统保存的配置信息")]),t._v("\ndisplay arp\t\t\t\t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看ARP表")]),t._v("\ndisplay clock\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 时间信息")]),t._v("\ndisplay logbuffer\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用户日志信息")]),t._v("\ndisplay memory-usage\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 内存使用信息")]),t._v("\ndisplay cpu-usage\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CPU使用情况")]),t._v("\ndisplay trapbuffer\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看告警信息")]),t._v("\ndisplay version\t\t\t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 版本信息")]),t._v("\ndisplay device\t\t\t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设备信息")]),t._v("\ndisplay interfaces\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看接口信息")]),t._v("\ndisplay interface brief\t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看接口状态和配置的简要信息")]),t._v("\ndisplay "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("users")]),t._v("\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有通过用户界面登录过的用户")]),t._v("\ndisplay interface eth-trunk\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看eth-trunk子接口状态")]),t._v("\ndisplay vlan\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看vlan")]),t._v("\ndisplay stp\t\t\t\t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看stp的状态和统计信息")]),t._v("\ndisplay time-range all\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看当前时间段的配置和状态")]),t._v("\ndisplay gvrp statistics\t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看各trunk端口的gvrp统计信息")]),t._v("\ndisplay acl all\t\t\t\t\t\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有ACL的配置")]),t._v("\ndisplay "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" routing-table\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看路由表")]),t._v("\ndisplay bfd session all\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有的BFD会话")]),t._v("\ndisplay rip \t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有或指定的RIP进程")]),t._v("\ndisplay rip route\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看RIP路由")]),t._v("\ndisplay rip neighbor\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看RIP的邻居")]),t._v("\ndisplay ospf lsdb\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看OSPF的链路状态数据库信息")]),t._v("\ndisplay ospf peer\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看各OSPF的邻居")]),t._v("\ndisplay ospf routing\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看各OSPF路由")]),t._v("\ndisplay bgp peer\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看BGP对等体")]),t._v("\ndisplay bgp routing table \t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看bgp路由表")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br")])]),s("h4",{attrs:{id:"_15-2-1-配置端口ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-1-配置端口ip"}},[t._v("#")]),t._v(" 15.2.1. 配置端口IP")]),t._v(" "),s("p",[t._v("二层口是无法直接配置IP的，可以把它加入某个vlan，给这个vlanif口配置IP。三层物理口才能直接配置IP。")]),t._v(" "),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\nsysname R1\nvlan batch 100\ninterface Vlanif 100\nip address 192.168.1.1 255.255.255.0\nquit\ninterface GigabitEthernet0/0/1\nport link-type access\nport default vlan 100\nreturn\nsave\nsystem-view\ninterface GigabitEthernet0/0/1\nip address 192.168.1.24 255.255.255.0\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[t._v("实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h4",{attrs:{id:"_15-2-2-启用telnet并配置vty线路登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-2-启用telnet并配置vty线路登录"}},[t._v("#")]),t._v(" 15.2.2. 启用telnet并配置vty线路登录")]),t._v(" "),s("p",[t._v("实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<Huawei>system-view\t\t\t\t\t\t\t\t\t\t\t\t# 进入系统视图\nEnter system view, return user view with Ctrl+Z.\n[Huawei]telnet server enable\t\t\t\t\t\t\t\t\t# 使能（开启）telnet服务功能\nInfo: The Telnet server has been enabled.\n[Huawei]user-interface vty 0 4\t\t\t\t\t\t\t\t\t# 开启vty线路模式，同时允许5个用户登录（0~4）\n[Huawei-ui-vty0-4]protocol inbound telnet\t\t\t\t\t\t# 配置vty入方向开启telnet协议\n[Huawei-ui-vty0-4]authentication-mode aaa\t\t\t\t\t\t# 设置认证模式，有 aaa,password,none三种模式，aaa组合认证，password密码认证，none不需要认证\n[Huawei-ui-vty0-4]quit\n[Huawei]aaa\t\t\t\t\t\t\t\t\t\t\t\t\t\t# 进入aaa视图\n[Huawei-aaa]local-user user1 password cipher Huawei12#$\t\t\t# 设置用户名为user1，密码为Huawei12#$，ensp可能缺少命令，所以\nInfo: Add a new user.\n[Huawei-aaa]local-user user1 privilege level 3\t\t\t\t\t# 设置账号的权限为3\n[Huawei-aaa]return\n<Huawei>save\t\t\t\t\t\t\t\t\t\t\t\t\t# 进入用户视图，保存\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\ntelnet server enable\nuser-interface vty 0 4\nprotocol inbound telnet\nauthentication-mode aaa\nquit\naaa\nlocal-user user1 password cipher Huawei12#$\nlocal-user user1 privilege level 3\nreturn\nsave\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h4",{attrs:{id:"_15-2-3-配置console用户验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-2-3-配置console用户验证"}},[t._v("#")]),t._v(" 15.2.3. 配置console用户验证")]),t._v(" "),s("p",[t._v("实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<Huawei>system-view\t\t\t\t\t\t\t\t\t\t\t\t\t# 进入系统视图\nEnter system view, return user view with Ctrl+Z.\n[Huawei]user-interface console 0\t\t\t\t\t\t\t\t\t# 进入console配置\n[Huawei-ui-console0]authentication-mode password\t\t\t\t\t# 设置认证方式为password\n[Huawei-ui-console0]set authentication password cipher Huawei12#$\t# 设置密码为Huawei12#$，cipher方式密码以密文存储，simple方式密码以明文存储\n[Huawei-ui-console0]return\n<Huawei>save\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\nuser-interface console 0\nauthentication-mode password\nset authentication password cipher Huawei12#$\nreturn\nsave\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"_15-3-华为交换机设备配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-3-华为交换机设备配置"}},[t._v("#")]),t._v(" 15.3. 华为交换机设备配置")]),t._v(" "),s("h4",{attrs:{id:"_15-3-1-配置端口隔离功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-3-1-配置端口隔离功能"}},[t._v("#")]),t._v(" 15.3.1. 配置端口隔离功能")]),t._v(" "),s("p",[t._v("可实现本台交换机的"),s("strong",[t._v("两个接口之间的二层数据的隔离")]),t._v("，而三层数据互通。")]),t._v(" "),s("p",[t._v("实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[Huawei]port-isolate mode l2\t\t\t\t\t\t\t\t# 配置全局端口隔离模式为二级隔离\n[Huawei]interface GigabitEthernet 0/0/1\n[Huawei-GigabitEthernet0/0/1]port-isolate enable group 1\t# 使能端口隔离模式，并将端口加入group 1\n[Huawei-GigabitEthernet0/0/1]quit\n[Huawei]interface GigabitEthernet 0/0/2\n[Huawei-GigabitEthernet0/0/2]port-isolate enable group 1\n[Huawei-GigabitEthernet0/0/2]return\n<Huawei>save\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("port-isolate mode l2\ninterface GigabitEthernet 0/0/1\nport-isolate enable group 1\nquit\ninterface GigabitEthernet 0/0/2\nport-isolate enable group 1\nreturn\nsave\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h4",{attrs:{id:"_15-3-2-vlan配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-3-2-vlan配置"}},[t._v("#")]),t._v(" 15.3.2. VLAN配置")]),t._v(" "),s("p",[t._v("常见vlan命令汇总：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("创建VLAN\n[undo] vlan vlan-id\t\t\t\t\t\t\t\t\t\t# 删除/创建vlan-id\nvlan batch [vlan-id1 to vlan-id2]\t\t\t\t\t\t# 批量创建VLAN\nport link-type [access|trunk|hybrid]\t\t\t\t\t# 配置端口类型\nport default vlan vlan-id\t\t\t\t\t\t\t\t# 把端口加入到一个指定VLAN\nport trunk allow-pass vlan [vlan-id1 to vlan-id2|all]\t# 配置trunk中允许通过的VLAN \nport hybrid [tagged|untagged] vlan vlan-id\t\t\t\t# 指定hybrid端口以tagged/untagged方式加入VLAN \n# 配置管理IP地址和子网掩码\ninterface vlanif 1\nip address 192.168.0.1 255.255.255.0\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("实例说明（基于端口划分VLAN）：")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://static.xiaoliutalk.cn/img/202210261443136.png"}}),t._v(" "),s("ul",[s("li",[t._v("PC1 和PC3 同属于—个VLAN 2且能相互通信。")]),t._v(" "),s("li",[t._v("PC2 和PC4 同属于另—个VLAN 3且能相互通信。")]),t._v(" "),s("li",[t._v("PC 端用户端口类型为access，交换机之间的端口采用带标签的 hybrid 类型或 trunk 类型两个方案。")])]),t._v(" "),s("h5",{attrs:{id:"方案1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方案1"}},[t._v("#")]),t._v(" 方案1")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("配置交换机所连接的PC端口所属VLAN")])])]),t._v(" "),s("p",[t._v("交换机 SWITCH1 实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<Huawei>system-view\nEnter system view, return user view with Ctrl+Z.\n[Huawei]sysname switch1\n[switch1]vlan batch 2 3\nInfo: This operation may take a few seconds. Please wait for a moment...done.\n[switch1]interface GigabitEthernet 0/0/1\n[switch1-GigabitEthernet0/0/1]port link-type access\n[switch1-GigabitEthernet0/0/1]port default vlan 2\n[switch1-GigabitEthernet0/0/1]quit\n[switch1]interface GigabitEthernet 0/0/2\n[switch1-GigabitEthernet0/0/2]port link-type access\n[switch1-GigabitEthernet0/0/2]port default vlan 3\n[switch1-GigabitEthernet0/0/2]quit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\nsysname switch1\nvlan batch 2 3\ninterface GigabitEthernet 0/0/1\nport link-type access\nport default vlan 2\nquit\ninterface GigabitEthernet 0/0/2\nport link-type access\nport default vlan 3\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("交换机 SWITCH2 实际操作同 SWITCH1 类似。")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("配置交换机SW1和SW2"),s("strong",[t._v("连接的端口类型为Hybrid")]),t._v("， 井以"),s("strong",[t._v("tagged带标签方式加入VLAN2和VLAN3")]),t._v("。")])]),t._v(" "),s("p",[t._v("交换机 SWITCH1 实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[switch1]interface GigabitEthernet 0/0/24\n[switch1-GigabitEthernet0/0/24]port link-type hybrid\t\t\t# 更改端口类型为hybrid\n[switch1-GigabitEthernet0/0/24]port hybrid tagged vlan 2 to 3\t# 允许vlan2和3通过此端口\n[switch1-GigabitEthernet0/0/24]quit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\ninterface GigabitEthernet 0/0/24\nport link-type hybrid\nport hybrid tagged vlan 2 to 3\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("交换机 SWITCH2 实际操作同 SWITCH1 相同。")]),t._v(" "),s("h5",{attrs:{id:"方案2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方案2"}},[t._v("#")]),t._v(" 方案2")]),t._v(" "),s("ol",[s("li",[t._v("交换机配置同方案1。")]),t._v(" "),s("li",[t._v("配置交换机SW1和SW2"),s("strong",[t._v("连接的端口类型为trunk")]),t._v("，同时"),s("strong",[t._v("允许所有vlan通过")]),t._v("。")])]),t._v(" "),s("p",[t._v("交换机 SWITCH1 实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\ninterface GigabitEthernet 0/0/24\nport link-type trunk\nport trunk allow-pass vlan all\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h5",{attrs:{id:"补充-基于-mac-地址划分-vlan-的实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#补充-基于-mac-地址划分-vlan-的实现"}},[t._v("#")]),t._v(" 补充：基于 MAC 地址划分 VLAN 的实现")]),t._v(" "),s("p",[t._v("实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[switch1]vlan 3 \n[switch1-vlan3]mac-vlan mac-address 5489-9897-3A2C\t\t\t# 需要注意格式，如MAC地址为54-89-98-97-3A-2C，需要改写成5489-9897-3A2C\n[switch1-vlan3]quit\n[switch1]interface GigabitEthernet 0/0/1\n[switch1-GigabitEthernet0/0/1]mac-vlan enable\t\t\t\t# 接口视图下使能mac地址划分vlan功能\n[switch1-GigabitEthernet0/0/1]quit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\nvlan 3 \nmac-vlan mac-address 5489-9897-3A2C\nquit\ninterface GigabitEthernet 0/0/1\nmac-vlan enable\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h4",{attrs:{id:"_15-3-3-gvrp配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-3-3-gvrp配置"}},[t._v("#")]),t._v(" 15.3.3. GVRP配置")]),t._v(" "),s("p",[t._v("GARP（Generic Attribute Registration Protocol）是—种通用属性注册协议，包括 GVRP 和 GMRP 两种应用，其中 GVRP 就类似于思科的 VTP 协议。")]),t._v(" "),s("p",[t._v("注册模式：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Normal 模式")]),t._v("："),s("strong",[t._v("允许动态VLAN")]),t._v("在端口上注册。"),s("strong",[t._v("同时发送动态和静态VLAN")]),t._v("的声明信息。")]),t._v(" "),s("li",[s("strong",[t._v("Fixed 模式")]),t._v("："),s("strong",[t._v("不允许动态VLAN")]),t._v("在端口上注册。"),s("strong",[t._v("只发送静态VLAN")]),t._v("的声明信息。")]),t._v(" "),s("li",[s("strong",[t._v("Forbidden 模式")]),t._v("："),s("strong",[t._v("不允许动态VLAN")]),t._v("在端口上注册。"),s("strong",[t._v("只发送VLAN 1")]),t._v("的声明信息。")])]),t._v(" "),s("p",[t._v("GVRP 配置案例：实现在交换机SW1和SW2之间通过GVRP功能实现VLAN的动态注册，并达到互通的目的。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://static.xiaoliutalk.cn/img/202210261426355.png"}}),t._v(" "),s("p",[t._v("交换机 SWITCH1 实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<Huawei>system-view\nEnter system view, return user view with Ctrl+Z.\n[Huawei]sysname switch1\n[switch1]vlan batch 2 3\nInfo: This operation may take a few seconds. Please wait for a moment...done.\n[switch1]gvrp\t\t\t\t\t\t\t\t\t\t\t\t\t\t# 全局开启gvrp\n[switch1]interface GigabitEthernet 0/0/1\n[switch1-GigabitEthernet0/0/1]port link-type trunk\n[switch1-GigabitEthernet0/0/1]port trunk allow-pass vlan all\t\t\n[switch1-GigabitEthernet0/0/1]gvrp \t\t\t\t\t\t\t\t\t# 使能端口的gvrp功能\n[switch1-GigabitEthernet0/0/1]gvrp registration normal\t\t\t\t# gvrp注册模式注册成normal\n[switch1-GigabitEthernet0/0/1]quit\n[switch1-GigabitEthernet0/0/1]display gvrp statistics\t\t\t\t# 查看gvrp的统计信息\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\nsysname switch1\nvlan batch 2 3\ngvrp\ninterface GigabitEthernet 0/0/1\nport link-type trunk\nport trunk allow-pass vlan all\ngvrp \ngvrp registration normal\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("交换机 SWITCH2 实际操作同 SWITCH1 类似，"),s("strong",[t._v("配置 SWITCH2 端口gvrp功能")]),t._v("即可。")]),t._v(" "),s("h4",{attrs:{id:"_15-3-4-stp配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-3-4-stp配置"}},[t._v("#")]),t._v(" 15.3.4. STP配置")]),t._v(" "),s("h5",{attrs:{id:"stp配置-需要补充"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stp配置-需要补充"}},[t._v("#")]),t._v(" STP配置（需要补充）")]),t._v(" "),s("p",[t._v("STP配置案例：网络中的交换机 A/B/C/D 均运行生成树协议，来消除网络中的环路。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://static.xiaoliutalk.cn/img/202210261634783.png"}}),t._v(" "),s("h5",{attrs:{id:"rstp配置-需要补充"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rstp配置-需要补充"}},[t._v("#")]),t._v(" RSTP配置（需要补充）")]),t._v(" "),s("h5",{attrs:{id:"mstp配置-需要补充"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mstp配置-需要补充"}},[t._v("#")]),t._v(" MSTP配置（需要补充）")]),t._v(" "),s("h4",{attrs:{id:"_15-3-5-链路聚合"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-3-5-链路聚合"}},[t._v("#")]),t._v(" 15.3.5. 链路聚合")]),t._v(" "),s("p",[t._v("将"),s("strong",[t._v("多条物理链路捆绑成一条逻辑链路")]),t._v("，实现"),s("strong",[t._v("负载均衡")]),t._v("、提高"),s("strong",[t._v("带宽容错")]),t._v("（当一条链路失效时，使用其他链路进行通信）。")]),t._v(" "),s("p",[t._v("以太网通道最多可以捆绑8条物理链路，其中物理链路可以是双绞线，也可以是光纤连接。")]),t._v(" "),s("p",[s("strong",[t._v("以太网通道捆绑规则")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("参加捆绑的端口属于"),s("strong",[t._v("同一个VLAN")]),t._v("。")]),t._v(" "),s("li",[t._v("如果端口配置的是中继模式，那么应该在链路两端将通道中的所有端口配置成"),s("strong",[t._v("相同的中继模式")]),t._v("。")]),t._v(" "),s("li",[t._v("所有参与捆绑的端口的"),s("strong",[t._v("物理参数设置必须相同")]),t._v("。应该有同样的速度和半双工或者全双工配置。")])]),t._v(" "),s("p",[t._v("链路聚合配置案例：")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://static.xiaoliutalk.cn/img/202210261541135.png"}}),t._v(" "),s("h5",{attrs:{id:"步骤一-在-switch1-和-switch2-上创建eth-trunk接口井加入成员接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-在-switch1-和-switch2-上创建eth-trunk接口井加入成员接口"}},[t._v("#")]),t._v(" 步骤一：在 SWITCH1 和 SWITCH2 上创建Eth-Trunk接口井加入成员接口")]),t._v(" "),s("p",[t._v("交换机 SWITCH1 实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<Huawei>system-view\nEnter system view, return user view with Ctrl+Z.\n[Huawei]sysname switch1\n[switch1]interface Eth-Trunk 1\t\t\t\t\t\t\t\t\t\t\t# 创建 Eth-Trunk 链路\n[switch1-Eth-Trunk1]trunkport GigabitEthernet 0/0/1 to 0/0/3\t\t\t# 把端口加入 Eth-Trunk 链路\nInfo: This operation may take a few seconds. Please wait for a moment...done.\n[switch1-Eth-Trunk1]quit\nOct 26 2022 15:59:05-08:00 switch1 %%01IFNET/4/IF_STATE(l)[0]:Interface Eth-Trun\nk1 has turned into UP state.\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system-view\nsysname switch1\ninterface Eth-Trunk 1\ntrunkport GigabitEthernet 0/0/1 to 0/0/3\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("交换机 SWITCH2 实际操作同 SWITCH1 类似。")]),t._v(" "),s("h5",{attrs:{id:"步骤二-创建vlan井将接口加入vlan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-创建vlan井将接口加入vlan"}},[t._v("#")]),t._v(" 步骤二：创建VLAN井将接口加入VLAN")]),t._v(" "),s("p",[t._v("创建 vlan10 和 vlan20 并分别加入接口：")]),t._v(" "),s("p",[t._v("交换机 SWITCH1 实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[switch1]vlan batch 10 20\nInfo: This operation may take a few seconds. Please wait for a moment...done.\n[switch1]interface GigabitEthernet 0/0/4\n[switch1-GigabitEthernet0/0/4]port link-type access\n[switch1-GigabitEthernet0/0/4]port trunk allow-pass vlan 10\n[switch1-GigabitEthernet0/0/4]quit\n[switch1]interface GigabitEthernet 0/0/5\n[switch1-GigabitEthernet0/0/5]port link-type access\n[switch1-GigabitEthernet0/0/5]port trunk allow-pass vlan 20\n[switch1-GigabitEthernet0/0/5]quit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vlan batch 10 20\ninterface GigabitEthernet 0/0/4\nport link-type access\nport trunk allow-pass vlan 10\nquit\ninterface GigabitEthernet 0/0/5\nport link-type access\nport trunk allow-pass vlan 20\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("交换机 SWITCH2 实际操作同 SWITCH1 相同。")]),t._v(" "),s("p",[t._v("配置 Eth-Trunk1 接口允许vlan10 和 vlan20 通过：")]),t._v(" "),s("p",[t._v("交换机 SWITCH1 实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[switch1]interface Eth-Trunk 1\n[switch1-Eth-Trunk1]port link-type trunk\n[switch1-Eth-Trunk1]port trunk allow-pass vlan 10 20\n[switch1-Eth-Trunk1]quit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("interface Eth-Trunk 1\nport link-type trunk\nport trunk allow-pass vlan 10 20\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("交换机 SWITCH2 实际操作同 SWITCH1 相同。")]),t._v(" "),s("h5",{attrs:{id:"步骤三-配置-eth-trunk1-的负载分担方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-配置-eth-trunk1-的负载分担方式"}},[t._v("#")]),t._v(" 步骤三：配置 Eth-Trunk1 的负载分担方式")]),t._v(" "),s("p",[t._v("交换机 SWITCH1 实际操作：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[switch1]interface Eth-Trunk 1\n[switch1-Eth-Trunk1]load-balance src-dst-mac\t\t# 负载方式为 源地址-目的地址-mac地址\n[switch1-Eth-Trunk1]quit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("CLI粘贴：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("interface Eth-Trunk 1\nload-balance src-dst-mac\nquit\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("交换机 SWITCH2 实际操作同 SWITCH1 相同。")]),t._v(" "),s("h5",{attrs:{id:"步骤四-验证配置结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-验证配置结果"}},[t._v("#")]),t._v(" 步骤四：验证配置结果")]),t._v(" "),s("p",[t._v("在任意视图下执行 "),s("code",[t._v("display Eth-Trunk 1")]),t._v(" 命令， 检查 Eth-Trunk 是否创建成功，及成员接口是否正确加入。")])])}),[],!1,null,null,null);s.default=e.exports}}]);