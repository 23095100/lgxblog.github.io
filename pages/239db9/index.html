<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络设备配置</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="小刘Talk">
    <meta name="keywords" content="博客,个人技术博客,运维,运维开发,技术文档,学习,面试,shell,linux,python,git,github,markdown,mysql,k8s,kubernetes">
    <meta name="baidu-site-verification" content="codeva-0ulOnZ5mxo">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d57f1eed.css" as="style"><link rel="preload" href="/assets/js/app.44d32a86.js" as="script"><link rel="preload" href="/assets/js/3.5c73636d.js" as="script"><link rel="preload" href="/assets/js/2.db635a7e.js" as="script"><link rel="preload" href="/assets/js/82.c11b9a89.js" as="script"><link rel="prefetch" href="/assets/js/1.e72d3a41.js"><link rel="prefetch" href="/assets/js/10.470c875d.js"><link rel="prefetch" href="/assets/js/100.7694e90b.js"><link rel="prefetch" href="/assets/js/101.de773466.js"><link rel="prefetch" href="/assets/js/102.e43f5886.js"><link rel="prefetch" href="/assets/js/103.aca15b97.js"><link rel="prefetch" href="/assets/js/104.e24987b7.js"><link rel="prefetch" href="/assets/js/105.8bd03527.js"><link rel="prefetch" href="/assets/js/106.7fdba3dc.js"><link rel="prefetch" href="/assets/js/107.5fae7fa1.js"><link rel="prefetch" href="/assets/js/108.f94c3bca.js"><link rel="prefetch" href="/assets/js/109.2c9d1cb9.js"><link rel="prefetch" href="/assets/js/11.55f1c469.js"><link rel="prefetch" href="/assets/js/110.3fed7898.js"><link rel="prefetch" href="/assets/js/111.0d7db2f7.js"><link rel="prefetch" href="/assets/js/112.9b58d506.js"><link rel="prefetch" href="/assets/js/113.34d227b2.js"><link rel="prefetch" href="/assets/js/114.e9ad4589.js"><link rel="prefetch" href="/assets/js/115.44a97d6b.js"><link rel="prefetch" href="/assets/js/116.1f447402.js"><link rel="prefetch" href="/assets/js/117.cf394d3b.js"><link rel="prefetch" href="/assets/js/118.6d145301.js"><link rel="prefetch" href="/assets/js/119.699a5b7f.js"><link rel="prefetch" href="/assets/js/12.ace28f5c.js"><link rel="prefetch" href="/assets/js/13.fe678adb.js"><link rel="prefetch" href="/assets/js/14.c4c56345.js"><link rel="prefetch" href="/assets/js/15.64878322.js"><link rel="prefetch" href="/assets/js/16.8c8ec038.js"><link rel="prefetch" href="/assets/js/17.51ce6f53.js"><link rel="prefetch" href="/assets/js/18.442ae8be.js"><link rel="prefetch" href="/assets/js/19.26a7830a.js"><link rel="prefetch" href="/assets/js/20.dccf36d3.js"><link rel="prefetch" href="/assets/js/21.93b93844.js"><link rel="prefetch" href="/assets/js/22.38e4c041.js"><link rel="prefetch" href="/assets/js/23.3a0f8d61.js"><link rel="prefetch" href="/assets/js/24.413b5042.js"><link rel="prefetch" href="/assets/js/25.4a54145c.js"><link rel="prefetch" href="/assets/js/26.873467b0.js"><link rel="prefetch" href="/assets/js/27.ef81b63e.js"><link rel="prefetch" href="/assets/js/28.e2b2c0e2.js"><link rel="prefetch" href="/assets/js/29.4a63077a.js"><link rel="prefetch" href="/assets/js/30.f238d48e.js"><link rel="prefetch" href="/assets/js/31.20151c7b.js"><link rel="prefetch" href="/assets/js/32.789d4b08.js"><link rel="prefetch" href="/assets/js/33.77a02530.js"><link rel="prefetch" href="/assets/js/34.e80359b2.js"><link rel="prefetch" href="/assets/js/35.7735b97c.js"><link rel="prefetch" href="/assets/js/36.5d720e2d.js"><link rel="prefetch" href="/assets/js/37.f22b373b.js"><link rel="prefetch" href="/assets/js/38.2b1182b1.js"><link rel="prefetch" href="/assets/js/39.0bc42f00.js"><link rel="prefetch" href="/assets/js/4.4513d890.js"><link rel="prefetch" href="/assets/js/40.8e27bbe7.js"><link rel="prefetch" href="/assets/js/41.06d0a91c.js"><link rel="prefetch" href="/assets/js/42.d0918d04.js"><link rel="prefetch" href="/assets/js/43.e9cc4f5a.js"><link rel="prefetch" href="/assets/js/44.1c5d322b.js"><link rel="prefetch" href="/assets/js/45.eddf4d4f.js"><link rel="prefetch" href="/assets/js/46.2436424e.js"><link rel="prefetch" href="/assets/js/47.5bbd7b8f.js"><link rel="prefetch" href="/assets/js/48.6666c1dd.js"><link rel="prefetch" href="/assets/js/49.ecb5c6e0.js"><link rel="prefetch" href="/assets/js/5.8eeb4257.js"><link rel="prefetch" href="/assets/js/50.cb07db14.js"><link rel="prefetch" href="/assets/js/51.1a49d9f3.js"><link rel="prefetch" href="/assets/js/52.c9b35342.js"><link rel="prefetch" href="/assets/js/53.ab8c2c92.js"><link rel="prefetch" href="/assets/js/54.d8b74f67.js"><link rel="prefetch" href="/assets/js/55.d7679bad.js"><link rel="prefetch" href="/assets/js/56.1e1cebb6.js"><link rel="prefetch" href="/assets/js/57.e552ebc4.js"><link rel="prefetch" href="/assets/js/58.c2253558.js"><link rel="prefetch" href="/assets/js/59.894648e3.js"><link rel="prefetch" href="/assets/js/6.dc744bea.js"><link rel="prefetch" href="/assets/js/60.d518c7e3.js"><link rel="prefetch" href="/assets/js/61.683e5b01.js"><link rel="prefetch" href="/assets/js/62.e77a2932.js"><link rel="prefetch" href="/assets/js/63.de13f230.js"><link rel="prefetch" href="/assets/js/64.5e811285.js"><link rel="prefetch" href="/assets/js/65.71f077b1.js"><link rel="prefetch" href="/assets/js/66.b65bc17e.js"><link rel="prefetch" href="/assets/js/67.44201295.js"><link rel="prefetch" href="/assets/js/68.52676de0.js"><link rel="prefetch" href="/assets/js/69.190d1315.js"><link rel="prefetch" href="/assets/js/70.be689ca4.js"><link rel="prefetch" href="/assets/js/71.7a47414f.js"><link rel="prefetch" href="/assets/js/72.9fe44768.js"><link rel="prefetch" href="/assets/js/73.d609fa3b.js"><link rel="prefetch" href="/assets/js/74.24541e12.js"><link rel="prefetch" href="/assets/js/75.28e53236.js"><link rel="prefetch" href="/assets/js/76.64ac0dbd.js"><link rel="prefetch" href="/assets/js/77.7f22398e.js"><link rel="prefetch" href="/assets/js/78.75145832.js"><link rel="prefetch" href="/assets/js/79.8742b244.js"><link rel="prefetch" href="/assets/js/80.7183e01e.js"><link rel="prefetch" href="/assets/js/81.459fdba1.js"><link rel="prefetch" href="/assets/js/83.bc962d13.js"><link rel="prefetch" href="/assets/js/84.40399def.js"><link rel="prefetch" href="/assets/js/85.3123b233.js"><link rel="prefetch" href="/assets/js/86.e000b600.js"><link rel="prefetch" href="/assets/js/87.dfeb546b.js"><link rel="prefetch" href="/assets/js/88.df6d311a.js"><link rel="prefetch" href="/assets/js/89.1f7641d5.js"><link rel="prefetch" href="/assets/js/9.fc34caf5.js"><link rel="prefetch" href="/assets/js/90.9babbd7c.js"><link rel="prefetch" href="/assets/js/91.dedab5a4.js"><link rel="prefetch" href="/assets/js/92.911a772a.js"><link rel="prefetch" href="/assets/js/93.de8e895c.js"><link rel="prefetch" href="/assets/js/94.721d7399.js"><link rel="prefetch" href="/assets/js/95.055dfde2.js"><link rel="prefetch" href="/assets/js/96.f85bbcc2.js"><link rel="prefetch" href="/assets/js/97.34d5e61c.js"><link rel="prefetch" href="/assets/js/98.04aca43a.js"><link rel="prefetch" href="/assets/js/99.6e22c440.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0a7ee356.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d57f1eed.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/ops/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>监控</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ops/grafana/" class="nav-link">grafana</a></li><li class="dropdown-subitem"><a href="/ops/prometheus/" class="nav-link">prometheus</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/coreSystemCommand/" class="nav-link">《核心系统命令实战》</a></li><li class="dropdown-subitem"><a href="/note/MySQLnote/" class="nav-link">《MySQL 是怎样运行的：从根儿上理解 MySQL》</a></li><li class="dropdown-subitem"><a href="/note/ansible/" class="nav-link">《Ansible权威指南》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专题" class="dropdown-title"><a href="/topic/" class="link-title">专题</a> <span class="title" style="display:none;">专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56a2b5/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/d7e255/" class="nav-link">git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/program/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3281ff/" class="nav-link">python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂七杂八" class="dropdown-title"><a href="/zaqizaba/" class="link-title">杂七杂八</a> <span class="title" style="display:none;">杂七杂八</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docsDemo/" class="nav-link">文档编写规范</a></li><li class="dropdown-item"><!----> <a href="/usedcomputers/" class="nav-link">我用过的电脑</a></li><li class="dropdown-item"><!----> <a href="/buwuzhengye/" class="nav-link">喷涂相关</a></li><li class="dropdown-item"><!----> <a href="/liubing/" class="nav-link">每日一溜</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xiaoliutalk/xiaoliutalk.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://www.xiaoliutalk.cn/img/favicon.ico"> <div class="blogger-info"><h3>小刘说</h3> <span>砥砺前行</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/ops/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>监控</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ops/grafana/" class="nav-link">grafana</a></li><li class="dropdown-subitem"><a href="/ops/prometheus/" class="nav-link">prometheus</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/coreSystemCommand/" class="nav-link">《核心系统命令实战》</a></li><li class="dropdown-subitem"><a href="/note/MySQLnote/" class="nav-link">《MySQL 是怎样运行的：从根儿上理解 MySQL》</a></li><li class="dropdown-subitem"><a href="/note/ansible/" class="nav-link">《Ansible权威指南》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专题" class="dropdown-title"><a href="/topic/" class="link-title">专题</a> <span class="title" style="display:none;">专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56a2b5/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/d7e255/" class="nav-link">git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/program/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3281ff/" class="nav-link">python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂七杂八" class="dropdown-title"><a href="/zaqizaba/" class="link-title">杂七杂八</a> <span class="title" style="display:none;">杂七杂八</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docsDemo/" class="nav-link">文档编写规范</a></li><li class="dropdown-item"><!----> <a href="/usedcomputers/" class="nav-link">我用过的电脑</a></li><li class="dropdown-item"><!----> <a href="/buwuzhengye/" class="nav-link">喷涂相关</a></li><li class="dropdown-item"><!----> <a href="/liubing/" class="nav-link">每日一溜</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xiaoliutalk/xiaoliutalk.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>软考中级</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/8e92bf/" class="sidebar-link">计算机硬件基础</a></li><li><a href="/pages/0b76d4/" class="sidebar-link">操作系统概述</a></li><li><a href="/pages/f1470b/" class="sidebar-link">系统开发与项目管理基础</a></li><li><a href="/pages/f21b3c/" class="sidebar-link">知识产权</a></li><li><a href="/pages/635ab7/" class="sidebar-link">数据通信基础</a></li><li><a href="/pages/96ed7d/" class="sidebar-link">网络体系架构</a></li><li><a href="/pages/d9e27a/" class="sidebar-link">局域网技术</a></li><li><a href="/pages/1f35f7/" class="sidebar-link">广域网与接入网技术</a></li><li><a href="/pages/9471c8/" class="sidebar-link">因特网与网络互联技术</a></li><li><a href="/pages/f18b22/" class="sidebar-link">网络管理技术</a></li><li><a href="/pages/a5a942/" class="sidebar-link">网络安全技术</a></li><li><a href="/pages/13f346/" class="sidebar-link">网络规划与设计</a></li><li><a href="/pages/b2a126/" class="sidebar-link">Windows服务器配置</a></li><li><a href="/pages/8fe67b/" class="sidebar-link">Linux服务器配置</a></li><li><a href="/pages/239db9/" aria-current="page" class="active sidebar-link">网络设备配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/239db9/#_15-网络设备配置" class="sidebar-link">15. 网络设备配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/239db9/#_15-1-网络设备基本配置" class="sidebar-link">15.1. 网络设备基本配置</a></li><li class="sidebar-sub-header level3"><a href="/pages/239db9/#_15-2-网络设备基本配置命令-华为" class="sidebar-link">15.2. 网络设备基本配置命令（华为）</a></li><li class="sidebar-sub-header level4"><a href="/pages/239db9/#_15-2-1-配置端口ip" class="sidebar-link">15.2.1. 配置端口IP</a></li><li class="sidebar-sub-header level4"><a href="/pages/239db9/#_15-2-2-启用telnet并配置vty线路登录" class="sidebar-link">15.2.2. 启用telnet并配置vty线路登录</a></li><li class="sidebar-sub-header level4"><a href="/pages/239db9/#_15-2-3-配置console用户验证" class="sidebar-link">15.2.3. 配置console用户验证</a></li><li class="sidebar-sub-header level3"><a href="/pages/239db9/#_15-3-华为交换机设备配置" class="sidebar-link">15.3. 华为交换机设备配置</a></li><li class="sidebar-sub-header level4"><a href="/pages/239db9/#_15-3-1-配置端口隔离功能" class="sidebar-link">15.3.1. 配置端口隔离功能</a></li><li class="sidebar-sub-header level4"><a href="/pages/239db9/#_15-3-2-vlan配置" class="sidebar-link">15.3.2. VLAN配置</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#方案1" class="sidebar-link">方案1</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#方案2" class="sidebar-link">方案2</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#补充-基于-mac-地址划分-vlan-的实现" class="sidebar-link">补充：基于 MAC 地址划分 VLAN 的实现</a></li><li class="sidebar-sub-header level4"><a href="/pages/239db9/#_15-3-3-gvrp配置" class="sidebar-link">15.3.3. GVRP配置</a></li><li class="sidebar-sub-header level4"><a href="/pages/239db9/#_15-3-4-stp配置" class="sidebar-link">15.3.4. STP配置</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#stp配置-需要补充" class="sidebar-link">STP配置（需要补充）</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#rstp配置-需要补充" class="sidebar-link">RSTP配置（需要补充）</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#mstp配置-需要补充" class="sidebar-link">MSTP配置（需要补充）</a></li><li class="sidebar-sub-header level4"><a href="/pages/239db9/#_15-3-5-链路聚合" class="sidebar-link">15.3.5. 链路聚合</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#步骤一-在-switch1-和-switch2-上创建eth-trunk接口井加入成员接口" class="sidebar-link">步骤一：在 SWITCH1 和 SWITCH2 上创建Eth-Trunk接口井加入成员接口</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#步骤二-创建vlan井将接口加入vlan" class="sidebar-link">步骤二：创建VLAN井将接口加入VLAN</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#步骤三-配置-eth-trunk1-的负载分担方式" class="sidebar-link">步骤三：配置 Eth-Trunk1 的负载分担方式</a></li><li class="sidebar-sub-header level5"><a href="/pages/239db9/#步骤四-验证配置结果" class="sidebar-link">步骤四：验证配置结果</a></li></ul></li></ul></li><li><a href="/pages/95edff/" class="sidebar-link">网络设备配置（路由器配置）</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>博客搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/topic/#专题" data-v-06225672>专题</a></li><li data-v-06225672><a href="/topic/#软考中级" data-v-06225672>软考中级</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>小刘</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-05-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">网络设备配置<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="网络设备配置"><a href="#网络设备配置" class="header-anchor">#</a> 网络设备配置</h1> <h2 id="_15-网络设备配置"><a href="#_15-网络设备配置" class="header-anchor">#</a> 15. 网络设备配置</h2> <h3 id="_15-1-网络设备基本配置"><a href="#_15-1-网络设备基本配置" class="header-anchor">#</a> 15.1. 网络设备基本配置</h3> <p>网络设备的操作系统：</p> <ul><li>华为设备：<strong>VRP</strong> (Versatile Routing Platform，通用路由平台），常用的有两个版本VRP5和VRP8。</li> <li>思科设备：<strong>IOS</strong>（internetwork operating system）</li></ul> <p>常见的三种设备配置方式：</p> <ul><li><strong>console方式</strong>：适合没有IP地址的网络设备， 通过console线缆与PC的com口相连，通过超级终端软件登录设备， 以命令行的方式实现配置。最常见的方式，使用console方式配置时，COM口的属性要与网络设备的属性向匹配。COM口的<strong>数据速率为9600b/s</strong> 。</li> <li><strong>telnet方式</strong>：适合有IP地址的网络设备，并确保PC与网络设备的连通性。</li> <li><strong>Web方式</strong>：适合有IP地址的网络设备，并内置有WEB页面。</li></ul> <p>COM口设置：</p> <p><img src="https://static.xiaoliutalk.cn/img/202210251631120.png" alt=""></p> <p>内存：</p> <ul><li><strong>ROM （只读存储器，Read-Only Memory )</strong>： 用于存放启动程序。<strong>操作系统的引导程序</strong>。</li> <li><strong>Flash （快闪存储器，Flash Memory )</strong>：用于<strong>存放操作系统</strong>。</li> <li><strong>RAM（随机存储器，Random Access Memory）</strong>： 可读可写的随机存储器，掉电数据消失，存放设备运行过程中产生的数据。</li> <li><strong>NVRAM（非易失性随机存储器，Non-Volatile Random Access Memory）</strong>：断电后仍能保持数据的一种RAM。用于<strong>存放启动配置文件( saved-configuration )</strong>。</li></ul> <p>指示灯提示判断：</p> <ul><li>灯灭：代表对应功能未启用。</li> <li>绿色常亮：代表对应功能正常运行。</li> <li>红色常亮：代表报警或出现故障。</li></ul> <p>常见指示灯：</p> <ul><li><p>PWR电源灯：绿色常亮代表正常。</p></li> <li><p>SYS系统运行状态灯：</p> <ul><li><p>灭：系统未运行。</p></li> <li><p>常绿：正常运行（慢闪）；升级（快闪）。</p></li> <li><p>红色：不正常（常亮）；出错（闪烁）。</p></li></ul></li> <li><p>ETH以太网接口灯：</p> <ul><li><p>灭：接口无连接。</p></li> <li><p>常亮（绿）：有连接。</p></li> <li><p>闪烁（绿）：传输数据。</p></li></ul></li> <li><p>STCK（stack模式状态灯）：</p> <ul><li>灭：未选择stack模式。</li> <li>常亮（绿）：指示stack信息。</li></ul></li></ul> <p>配置文件：</p> <p>运行配置文件： 当前配置文件，<strong>已保存或尚未保存</strong>的文件。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>current-configuration （华为）
running-config （思科）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>启动配置文件： 执行保存命令后的启动配置文件。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>saved-configuration （华为）
startup-config （思科）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>保存当前配置到启动配置命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>save （华为）
<span class="token function">write</span> （思科）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_15-2-网络设备基本配置命令-华为"><a href="#_15-2-网络设备基本配置命令-华为" class="header-anchor">#</a> 15.2. 网络设备基本配置命令（华为）</h3> <img src="https://static.xiaoliutalk.cn/img/202210251734895.jpg" style="zoom:50%;"> <table><thead><tr><th>视图</th> <th>功能</th> <th>提示符</th> <th>进入命令</th> <th>退出命令</th></tr></thead> <tbody><tr><td>用户视图</td> <td>查看交换机的简单运行状态和统计信息</td> <td><Huawei></Huawei></td> <td>默认视图</td> <td>quit</td></tr> <tr><td>系统视图</td> <td>配置系统参数</td> <td>[Huawei]</td> <td>system-view</td> <td>quit或者return返回用户视图</td></tr> <tr><td>以太网端口视图</td> <td>配置以太网端口参数</td> <td>[Huawei-Ethernet0/0/1]</td> <td>在系统视图下输入 interface Ethernet0/0/1</td> <td>quit或者return返回用户视图</td></tr> <tr><td>Vlan视图</td> <td>配置Vlan参数</td> <td>[Huawei-vlan1]</td> <td>在系统视图下输入 vlan 1</td> <td>quit或者return返回用户视图</td></tr> <tr><td>Vlan接口视图</td> <td>配置Vlan接口参数</td> <td>[Huawei-Vlanif10]</td> <td>在系统视图下输入 interface Vlanif 10</td> <td>quit或者return返回用户视图</td></tr> <tr><td>Vty用户界面视图</td> <td>配置单个或多个vty用户界面参数</td> <td>[Huawei-ui-vty1][Huawei-ui-vty1-3]</td> <td>在系统视图下输入 user-interface vty 1或者 user-interface vty 1 3</td> <td>quit或者return返回用户视图</td></tr> <tr><td>console用户界面视图</td> <td>配置console用户界面视图</td> <td>[Huawei-ui-console0]</td> <td>在系统视图下输入 user-interface console 0</td> <td>quit或者return返回用户视图</td></tr> <tr><td>RIP/ospf协议视图</td> <td>配置RIP/ospf路由协议参数</td> <td>[Huawei-rip-1][Huawei-ospf-1]</td> <td>在系统视图下输入 rip/ospf</td> <td>quit或者return返回用户视图</td></tr> <tr><td>基本/高级ACL视图</td> <td>配置ACL协议控制列表</td> <td>[Huawei-acl-basic-2100][Huawei-acl-adv-3000]</td> <td>在系统视图下输入 acl 2100|acl 3000</td> <td>quit或者return返回用户视图</td></tr></tbody></table> <p><strong>华为设备的用户级别</strong>：</p> <table><thead><tr><th>用户级别</th> <th>命令级别</th> <th>说明</th></tr></thead> <tbody><tr><td>0（参观级）</td> <td>0</td> <td>网络诊断类命令（ping、tracert），从本设备访问其他设备命令（telnet）等。</td></tr> <tr><td>1（监控级）</td> <td>0、1</td> <td>系统维护命令，比如display命令。</td></tr> <tr><td>2（配置级）</td> <td>0、1、2、</td> <td>业务配置命令</td></tr> <tr><td>3~15（管理级）在不改变命令级别的前提下，可以理解为3-15用户权限相同</td> <td>0、1、2、3</td> <td>涉及系统基本运行的命令，故障诊断命令debugging命令，还有部分display命令 current-configuration 和 saved-configuration</td></tr></tbody></table> <p>常见display命令汇总：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>display current-configuration			<span class="token comment"># 系统当前配置信息</span>
display saved-configuration			    <span class="token comment"># 系统保存的配置信息</span>
display arp							    <span class="token comment"># 查看ARP表</span>
display clock							<span class="token comment"># 时间信息</span>
display logbuffer						<span class="token comment"># 用户日志信息</span>
display memory-usage					<span class="token comment"># 内存使用信息</span>
display cpu-usage						<span class="token comment"># CPU使用情况</span>
display trapbuffer						<span class="token comment"># 查看告警信息</span>
display version						    <span class="token comment"># 版本信息</span>
display device						    <span class="token comment"># 设备信息</span>
display interfaces						<span class="token comment"># 查看接口信息</span>
display interface brief				    <span class="token comment"># 查看接口状态和配置的简要信息</span>
display <span class="token function">users</span>							<span class="token comment"># 查看所有通过用户界面登录过的用户</span>
display interface eth-trunk			    <span class="token comment"># 查看eth-trunk子接口状态</span>
display vlan							<span class="token comment"># 查看vlan</span>
display stp							    <span class="token comment"># 查看stp的状态和统计信息</span>
display time-range all					<span class="token comment"># 查看当前时间段的配置和状态</span>
display gvrp statistics				    <span class="token comment"># 查看各trunk端口的gvrp统计信息</span>
display acl all						    <span class="token comment"># 查看所有ACL的配置</span>
display <span class="token function">ip</span> routing-table				<span class="token comment"># 查看路由表</span>
display bfd session all					<span class="token comment"># 查看所有的BFD会话</span>
display rip 							<span class="token comment"># 查看所有或指定的RIP进程</span>
display rip route						<span class="token comment"># 查看RIP路由</span>
display rip neighbor					<span class="token comment"># 查看RIP的邻居</span>
display ospf lsdb						<span class="token comment"># 查看OSPF的链路状态数据库信息</span>
display ospf peer						<span class="token comment"># 查看各OSPF的邻居</span>
display ospf routing					<span class="token comment"># 查看各OSPF路由</span>
display bgp peer						<span class="token comment"># 查看BGP对等体</span>
display bgp routing table 				<span class="token comment"># 查看bgp路由表</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="_15-2-1-配置端口ip"><a href="#_15-2-1-配置端口ip" class="header-anchor">#</a> 15.2.1. 配置端口IP</h4> <p>二层口是无法直接配置IP的，可以把它加入某个vlan，给这个vlanif口配置IP。三层物理口才能直接配置IP。</p> <p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
sysname R1
vlan batch 100
interface Vlanif 100
ip address 192.168.1.1 255.255.255.0
quit
interface GigabitEthernet0/0/1
port link-type access
port default vlan 100
return
save
system-view
interface GigabitEthernet0/0/1
ip address 192.168.1.24 255.255.255.0
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_15-2-2-启用telnet并配置vty线路登录"><a href="#_15-2-2-启用telnet并配置vty线路登录" class="header-anchor">#</a> 15.2.2. 启用telnet并配置vty线路登录</h4> <p>实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;Huawei&gt;system-view												# 进入系统视图
Enter system view, return user view with Ctrl+Z.
[Huawei]telnet server enable									# 使能（开启）telnet服务功能
Info: The Telnet server has been enabled.
[Huawei]user-interface vty 0 4									# 开启vty线路模式，同时允许5个用户登录（0~4）
[Huawei-ui-vty0-4]protocol inbound telnet						# 配置vty入方向开启telnet协议
[Huawei-ui-vty0-4]authentication-mode aaa						# 设置认证模式，有 aaa,password,none三种模式，aaa组合认证，password密码认证，none不需要认证
[Huawei-ui-vty0-4]quit
[Huawei]aaa														# 进入aaa视图
[Huawei-aaa]local-user user1 password cipher Huawei12#$			# 设置用户名为user1，密码为Huawei12#$，ensp可能缺少命令，所以
Info: Add a new user.
[Huawei-aaa]local-user user1 privilege level 3					# 设置账号的权限为3
[Huawei-aaa]return
&lt;Huawei&gt;save													# 进入用户视图，保存
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
telnet server enable
user-interface vty 0 4
protocol inbound telnet
authentication-mode aaa
quit
aaa
local-user user1 password cipher Huawei12#$
local-user user1 privilege level 3
return
save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_15-2-3-配置console用户验证"><a href="#_15-2-3-配置console用户验证" class="header-anchor">#</a> 15.2.3. 配置console用户验证</h4> <p>实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;Huawei&gt;system-view													# 进入系统视图
Enter system view, return user view with Ctrl+Z.
[Huawei]user-interface console 0									# 进入console配置
[Huawei-ui-console0]authentication-mode password					# 设置认证方式为password
[Huawei-ui-console0]set authentication password cipher Huawei12#$	# 设置密码为Huawei12#$，cipher方式密码以密文存储，simple方式密码以明文存储
[Huawei-ui-console0]return
&lt;Huawei&gt;save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
user-interface console 0
authentication-mode password
set authentication password cipher Huawei12#$
return
save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_15-3-华为交换机设备配置"><a href="#_15-3-华为交换机设备配置" class="header-anchor">#</a> 15.3. 华为交换机设备配置</h3> <h4 id="_15-3-1-配置端口隔离功能"><a href="#_15-3-1-配置端口隔离功能" class="header-anchor">#</a> 15.3.1. 配置端口隔离功能</h4> <p>可实现本台交换机的<strong>两个接口之间的二层数据的隔离</strong>，而三层数据互通。</p> <p>实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[Huawei]port-isolate mode l2								# 配置全局端口隔离模式为二级隔离
[Huawei]interface GigabitEthernet 0/0/1
[Huawei-GigabitEthernet0/0/1]port-isolate enable group 1	# 使能端口隔离模式，并将端口加入group 1
[Huawei-GigabitEthernet0/0/1]quit
[Huawei]interface GigabitEthernet 0/0/2
[Huawei-GigabitEthernet0/0/2]port-isolate enable group 1
[Huawei-GigabitEthernet0/0/2]return
&lt;Huawei&gt;save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>port-isolate mode l2
interface GigabitEthernet 0/0/1
port-isolate enable group 1
quit
interface GigabitEthernet 0/0/2
port-isolate enable group 1
return
save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_15-3-2-vlan配置"><a href="#_15-3-2-vlan配置" class="header-anchor">#</a> 15.3.2. VLAN配置</h4> <p>常见vlan命令汇总：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>创建VLAN
[undo] vlan vlan-id										# 删除/创建vlan-id
vlan batch [vlan-id1 to vlan-id2]						# 批量创建VLAN
port link-type [access|trunk|hybrid]					# 配置端口类型
port default vlan vlan-id								# 把端口加入到一个指定VLAN
port trunk allow-pass vlan [vlan-id1 to vlan-id2|all]	# 配置trunk中允许通过的VLAN 
port hybrid [tagged|untagged] vlan vlan-id				# 指定hybrid端口以tagged/untagged方式加入VLAN 
# 配置管理IP地址和子网掩码
interface vlanif 1
ip address 192.168.0.1 255.255.255.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>实例说明（基于端口划分VLAN）：</p> <img src="https://static.xiaoliutalk.cn/img/202210261443136.png" style="zoom:50%;"> <ul><li>PC1 和PC3 同属于—个VLAN 2且能相互通信。</li> <li>PC2 和PC4 同属于另—个VLAN 3且能相互通信。</li> <li>PC 端用户端口类型为access，交换机之间的端口采用带标签的 hybrid 类型或 trunk 类型两个方案。</li></ul> <h5 id="方案1"><a href="#方案1" class="header-anchor">#</a> 方案1</h5> <ol><li><strong>配置交换机所连接的PC端口所属VLAN</strong></li></ol> <p>交换机 SWITCH1 实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;Huawei&gt;system-view
Enter system view, return user view with Ctrl+Z.
[Huawei]sysname switch1
[switch1]vlan batch 2 3
Info: This operation may take a few seconds. Please wait for a moment...done.
[switch1]interface GigabitEthernet 0/0/1
[switch1-GigabitEthernet0/0/1]port link-type access
[switch1-GigabitEthernet0/0/1]port default vlan 2
[switch1-GigabitEthernet0/0/1]quit
[switch1]interface GigabitEthernet 0/0/2
[switch1-GigabitEthernet0/0/2]port link-type access
[switch1-GigabitEthernet0/0/2]port default vlan 3
[switch1-GigabitEthernet0/0/2]quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
sysname switch1
vlan batch 2 3
interface GigabitEthernet 0/0/1
port link-type access
port default vlan 2
quit
interface GigabitEthernet 0/0/2
port link-type access
port default vlan 3
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>交换机 SWITCH2 实际操作同 SWITCH1 类似。</p> <ol start="2"><li>配置交换机SW1和SW2<strong>连接的端口类型为Hybrid</strong>， 井以<strong>tagged带标签方式加入VLAN2和VLAN3</strong>。</li></ol> <p>交换机 SWITCH1 实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[switch1]interface GigabitEthernet 0/0/24
[switch1-GigabitEthernet0/0/24]port link-type hybrid			# 更改端口类型为hybrid
[switch1-GigabitEthernet0/0/24]port hybrid tagged vlan 2 to 3	# 允许vlan2和3通过此端口
[switch1-GigabitEthernet0/0/24]quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
interface GigabitEthernet 0/0/24
port link-type hybrid
port hybrid tagged vlan 2 to 3
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>交换机 SWITCH2 实际操作同 SWITCH1 相同。</p> <h5 id="方案2"><a href="#方案2" class="header-anchor">#</a> 方案2</h5> <ol><li>交换机配置同方案1。</li> <li>配置交换机SW1和SW2<strong>连接的端口类型为trunk</strong>，同时<strong>允许所有vlan通过</strong>。</li></ol> <p>交换机 SWITCH1 实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
interface GigabitEthernet 0/0/24
port link-type trunk
port trunk allow-pass vlan all
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="补充-基于-mac-地址划分-vlan-的实现"><a href="#补充-基于-mac-地址划分-vlan-的实现" class="header-anchor">#</a> 补充：基于 MAC 地址划分 VLAN 的实现</h5> <p>实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[switch1]vlan 3 
[switch1-vlan3]mac-vlan mac-address 5489-9897-3A2C			# 需要注意格式，如MAC地址为54-89-98-97-3A-2C，需要改写成5489-9897-3A2C
[switch1-vlan3]quit
[switch1]interface GigabitEthernet 0/0/1
[switch1-GigabitEthernet0/0/1]mac-vlan enable				# 接口视图下使能mac地址划分vlan功能
[switch1-GigabitEthernet0/0/1]quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
vlan 3 
mac-vlan mac-address 5489-9897-3A2C
quit
interface GigabitEthernet 0/0/1
mac-vlan enable
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_15-3-3-gvrp配置"><a href="#_15-3-3-gvrp配置" class="header-anchor">#</a> 15.3.3. GVRP配置</h4> <p>GARP（Generic Attribute Registration Protocol）是—种通用属性注册协议，包括 GVRP 和 GMRP 两种应用，其中 GVRP 就类似于思科的 VTP 协议。</p> <p>注册模式：</p> <ul><li><strong>Normal 模式</strong>：<strong>允许动态VLAN</strong>在端口上注册。<strong>同时发送动态和静态VLAN</strong>的声明信息。</li> <li><strong>Fixed 模式</strong>：<strong>不允许动态VLAN</strong>在端口上注册。<strong>只发送静态VLAN</strong>的声明信息。</li> <li><strong>Forbidden 模式</strong>：<strong>不允许动态VLAN</strong>在端口上注册。<strong>只发送VLAN 1</strong>的声明信息。</li></ul> <p>GVRP 配置案例：实现在交换机SW1和SW2之间通过GVRP功能实现VLAN的动态注册，并达到互通的目的。</p> <img src="https://static.xiaoliutalk.cn/img/202210261426355.png" style="zoom:50%;"> <p>交换机 SWITCH1 实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;Huawei&gt;system-view
Enter system view, return user view with Ctrl+Z.
[Huawei]sysname switch1
[switch1]vlan batch 2 3
Info: This operation may take a few seconds. Please wait for a moment...done.
[switch1]gvrp														# 全局开启gvrp
[switch1]interface GigabitEthernet 0/0/1
[switch1-GigabitEthernet0/0/1]port link-type trunk
[switch1-GigabitEthernet0/0/1]port trunk allow-pass vlan all		
[switch1-GigabitEthernet0/0/1]gvrp 									# 使能端口的gvrp功能
[switch1-GigabitEthernet0/0/1]gvrp registration normal				# gvrp注册模式注册成normal
[switch1-GigabitEthernet0/0/1]quit
[switch1-GigabitEthernet0/0/1]display gvrp statistics				# 查看gvrp的统计信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
sysname switch1
vlan batch 2 3
gvrp
interface GigabitEthernet 0/0/1
port link-type trunk
port trunk allow-pass vlan all
gvrp 
gvrp registration normal
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>交换机 SWITCH2 实际操作同 SWITCH1 类似，<strong>配置 SWITCH2 端口gvrp功能</strong>即可。</p> <h4 id="_15-3-4-stp配置"><a href="#_15-3-4-stp配置" class="header-anchor">#</a> 15.3.4. STP配置</h4> <h5 id="stp配置-需要补充"><a href="#stp配置-需要补充" class="header-anchor">#</a> STP配置（需要补充）</h5> <p>STP配置案例：网络中的交换机 A/B/C/D 均运行生成树协议，来消除网络中的环路。</p> <img src="https://static.xiaoliutalk.cn/img/202210261634783.png" style="zoom:50%;"> <h5 id="rstp配置-需要补充"><a href="#rstp配置-需要补充" class="header-anchor">#</a> RSTP配置（需要补充）</h5> <h5 id="mstp配置-需要补充"><a href="#mstp配置-需要补充" class="header-anchor">#</a> MSTP配置（需要补充）</h5> <h4 id="_15-3-5-链路聚合"><a href="#_15-3-5-链路聚合" class="header-anchor">#</a> 15.3.5. 链路聚合</h4> <p>将<strong>多条物理链路捆绑成一条逻辑链路</strong>，实现<strong>负载均衡</strong>、提高<strong>带宽容错</strong>（当一条链路失效时，使用其他链路进行通信）。</p> <p>以太网通道最多可以捆绑8条物理链路，其中物理链路可以是双绞线，也可以是光纤连接。</p> <p><strong>以太网通道捆绑规则</strong>：</p> <ul><li>参加捆绑的端口属于<strong>同一个VLAN</strong>。</li> <li>如果端口配置的是中继模式，那么应该在链路两端将通道中的所有端口配置成<strong>相同的中继模式</strong>。</li> <li>所有参与捆绑的端口的<strong>物理参数设置必须相同</strong>。应该有同样的速度和半双工或者全双工配置。</li></ul> <p>链路聚合配置案例：</p> <img src="https://static.xiaoliutalk.cn/img/202210261541135.png" style="zoom:50%;"> <h5 id="步骤一-在-switch1-和-switch2-上创建eth-trunk接口井加入成员接口"><a href="#步骤一-在-switch1-和-switch2-上创建eth-trunk接口井加入成员接口" class="header-anchor">#</a> 步骤一：在 SWITCH1 和 SWITCH2 上创建Eth-Trunk接口井加入成员接口</h5> <p>交换机 SWITCH1 实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;Huawei&gt;system-view
Enter system view, return user view with Ctrl+Z.
[Huawei]sysname switch1
[switch1]interface Eth-Trunk 1											# 创建 Eth-Trunk 链路
[switch1-Eth-Trunk1]trunkport GigabitEthernet 0/0/1 to 0/0/3			# 把端口加入 Eth-Trunk 链路
Info: This operation may take a few seconds. Please wait for a moment...done.
[switch1-Eth-Trunk1]quit
Oct 26 2022 15:59:05-08:00 switch1 %%01IFNET/4/IF_STATE(l)[0]:Interface Eth-Trun
k1 has turned into UP state.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>system-view
sysname switch1
interface Eth-Trunk 1
trunkport GigabitEthernet 0/0/1 to 0/0/3
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>交换机 SWITCH2 实际操作同 SWITCH1 类似。</p> <h5 id="步骤二-创建vlan井将接口加入vlan"><a href="#步骤二-创建vlan井将接口加入vlan" class="header-anchor">#</a> 步骤二：创建VLAN井将接口加入VLAN</h5> <p>创建 vlan10 和 vlan20 并分别加入接口：</p> <p>交换机 SWITCH1 实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[switch1]vlan batch 10 20
Info: This operation may take a few seconds. Please wait for a moment...done.
[switch1]interface GigabitEthernet 0/0/4
[switch1-GigabitEthernet0/0/4]port link-type access
[switch1-GigabitEthernet0/0/4]port trunk allow-pass vlan 10
[switch1-GigabitEthernet0/0/4]quit
[switch1]interface GigabitEthernet 0/0/5
[switch1-GigabitEthernet0/0/5]port link-type access
[switch1-GigabitEthernet0/0/5]port trunk allow-pass vlan 20
[switch1-GigabitEthernet0/0/5]quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vlan batch 10 20
interface GigabitEthernet 0/0/4
port link-type access
port trunk allow-pass vlan 10
quit
interface GigabitEthernet 0/0/5
port link-type access
port trunk allow-pass vlan 20
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>交换机 SWITCH2 实际操作同 SWITCH1 相同。</p> <p>配置 Eth-Trunk1 接口允许vlan10 和 vlan20 通过：</p> <p>交换机 SWITCH1 实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[switch1]interface Eth-Trunk 1
[switch1-Eth-Trunk1]port link-type trunk
[switch1-Eth-Trunk1]port trunk allow-pass vlan 10 20
[switch1-Eth-Trunk1]quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>interface Eth-Trunk 1
port link-type trunk
port trunk allow-pass vlan 10 20
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>交换机 SWITCH2 实际操作同 SWITCH1 相同。</p> <h5 id="步骤三-配置-eth-trunk1-的负载分担方式"><a href="#步骤三-配置-eth-trunk1-的负载分担方式" class="header-anchor">#</a> 步骤三：配置 Eth-Trunk1 的负载分担方式</h5> <p>交换机 SWITCH1 实际操作：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[switch1]interface Eth-Trunk 1
[switch1-Eth-Trunk1]load-balance src-dst-mac		# 负载方式为 源地址-目的地址-mac地址
[switch1-Eth-Trunk1]quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>CLI粘贴：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>interface Eth-Trunk 1
load-balance src-dst-mac
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>交换机 SWITCH2 实际操作同 SWITCH1 相同。</p> <h5 id="步骤四-验证配置结果"><a href="#步骤四-验证配置结果" class="header-anchor">#</a> 步骤四：验证配置结果</h5> <p>在任意视图下执行 <code>display Eth-Trunk 1</code> 命令， 检查 Eth-Trunk 是否创建成功，及成员接口是否正确加入。</p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/05/11, 11:55:33</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/8fe67b/" class="prev">Linux服务器配置</a></span> <span class="next"><a href="/pages/95edff/">网络设备配置（路由器配置）</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/82c021/"><div>
            kubernetes控制器-Service
            <!----></div></a> <span class="date">08-18</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/d5cb3c/"><div>
            kubernetes控制器-Deployment
            <!----></div></a> <span class="date">08-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/e33737/"><div>
            kubernetes调度基础
            <!----></div></a> <span class="date">07-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:248920070@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xiaoliutalk" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/xiaoliuTalk" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span><a href="https://ipw.cn/ipv6webcheck/?site=www.xiaoliutalk.cn" title="本站支持IPv6访问" target="_blank"><img style="display:inline-block;vertical-align:middle" alt="本站支持IPv6访问" src="https://static.ipw.cn/icon/ipv6-s3.svg"></a>         <a href="https://ipw.cn/ssl/?site=www.xiaoliutalk.cn" title="本站支持SSL安全访问" target="_blank"><img style="display:inline-block;vertical-align:middle" alt="本站支持SSL安全访问" src="https://static.ipw.cn/icon/ssl-s3.svg"></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:10px;bottom:0px;width:135px;height:200px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="200" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:200px;"></canvas></div><div></div></div></div>
    <script src="/assets/js/app.44d32a86.js" defer></script><script src="/assets/js/3.5c73636d.js" defer></script><script src="/assets/js/2.db635a7e.js" defer></script><script src="/assets/js/82.c11b9a89.js" defer></script>
  </body>
</html>
