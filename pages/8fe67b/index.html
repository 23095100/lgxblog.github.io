<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux服务器配置</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="小刘Talk">
    <meta name="keywords" content="博客,个人技术博客,运维,运维开发,技术文档,学习,面试,shell,linux,python,git,github,markdown,mysql,k8s,kubernetes">
    <meta name="baidu-site-verification" content="codeva-0ulOnZ5mxo">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d57f1eed.css" as="style"><link rel="preload" href="/assets/js/app.44d32a86.js" as="script"><link rel="preload" href="/assets/js/3.5c73636d.js" as="script"><link rel="preload" href="/assets/js/2.db635a7e.js" as="script"><link rel="preload" href="/assets/js/81.459fdba1.js" as="script"><link rel="prefetch" href="/assets/js/1.e72d3a41.js"><link rel="prefetch" href="/assets/js/10.470c875d.js"><link rel="prefetch" href="/assets/js/100.7694e90b.js"><link rel="prefetch" href="/assets/js/101.de773466.js"><link rel="prefetch" href="/assets/js/102.e43f5886.js"><link rel="prefetch" href="/assets/js/103.aca15b97.js"><link rel="prefetch" href="/assets/js/104.e24987b7.js"><link rel="prefetch" href="/assets/js/105.8bd03527.js"><link rel="prefetch" href="/assets/js/106.7fdba3dc.js"><link rel="prefetch" href="/assets/js/107.5fae7fa1.js"><link rel="prefetch" href="/assets/js/108.f94c3bca.js"><link rel="prefetch" href="/assets/js/109.2c9d1cb9.js"><link rel="prefetch" href="/assets/js/11.55f1c469.js"><link rel="prefetch" href="/assets/js/110.3fed7898.js"><link rel="prefetch" href="/assets/js/111.0d7db2f7.js"><link rel="prefetch" href="/assets/js/112.9b58d506.js"><link rel="prefetch" href="/assets/js/113.34d227b2.js"><link rel="prefetch" href="/assets/js/114.e9ad4589.js"><link rel="prefetch" href="/assets/js/115.44a97d6b.js"><link rel="prefetch" href="/assets/js/116.1f447402.js"><link rel="prefetch" href="/assets/js/117.cf394d3b.js"><link rel="prefetch" href="/assets/js/118.6d145301.js"><link rel="prefetch" href="/assets/js/119.699a5b7f.js"><link rel="prefetch" href="/assets/js/12.ace28f5c.js"><link rel="prefetch" href="/assets/js/13.fe678adb.js"><link rel="prefetch" href="/assets/js/14.c4c56345.js"><link rel="prefetch" href="/assets/js/15.64878322.js"><link rel="prefetch" href="/assets/js/16.8c8ec038.js"><link rel="prefetch" href="/assets/js/17.51ce6f53.js"><link rel="prefetch" href="/assets/js/18.442ae8be.js"><link rel="prefetch" href="/assets/js/19.26a7830a.js"><link rel="prefetch" href="/assets/js/20.dccf36d3.js"><link rel="prefetch" href="/assets/js/21.93b93844.js"><link rel="prefetch" href="/assets/js/22.38e4c041.js"><link rel="prefetch" href="/assets/js/23.3a0f8d61.js"><link rel="prefetch" href="/assets/js/24.413b5042.js"><link rel="prefetch" href="/assets/js/25.4a54145c.js"><link rel="prefetch" href="/assets/js/26.873467b0.js"><link rel="prefetch" href="/assets/js/27.ef81b63e.js"><link rel="prefetch" href="/assets/js/28.e2b2c0e2.js"><link rel="prefetch" href="/assets/js/29.4a63077a.js"><link rel="prefetch" href="/assets/js/30.f238d48e.js"><link rel="prefetch" href="/assets/js/31.20151c7b.js"><link rel="prefetch" href="/assets/js/32.789d4b08.js"><link rel="prefetch" href="/assets/js/33.77a02530.js"><link rel="prefetch" href="/assets/js/34.e80359b2.js"><link rel="prefetch" href="/assets/js/35.7735b97c.js"><link rel="prefetch" href="/assets/js/36.5d720e2d.js"><link rel="prefetch" href="/assets/js/37.f22b373b.js"><link rel="prefetch" href="/assets/js/38.2b1182b1.js"><link rel="prefetch" href="/assets/js/39.0bc42f00.js"><link rel="prefetch" href="/assets/js/4.4513d890.js"><link rel="prefetch" href="/assets/js/40.8e27bbe7.js"><link rel="prefetch" href="/assets/js/41.06d0a91c.js"><link rel="prefetch" href="/assets/js/42.d0918d04.js"><link rel="prefetch" href="/assets/js/43.e9cc4f5a.js"><link rel="prefetch" href="/assets/js/44.1c5d322b.js"><link rel="prefetch" href="/assets/js/45.eddf4d4f.js"><link rel="prefetch" href="/assets/js/46.2436424e.js"><link rel="prefetch" href="/assets/js/47.5bbd7b8f.js"><link rel="prefetch" href="/assets/js/48.6666c1dd.js"><link rel="prefetch" href="/assets/js/49.ecb5c6e0.js"><link rel="prefetch" href="/assets/js/5.8eeb4257.js"><link rel="prefetch" href="/assets/js/50.cb07db14.js"><link rel="prefetch" href="/assets/js/51.1a49d9f3.js"><link rel="prefetch" href="/assets/js/52.c9b35342.js"><link rel="prefetch" href="/assets/js/53.ab8c2c92.js"><link rel="prefetch" href="/assets/js/54.d8b74f67.js"><link rel="prefetch" href="/assets/js/55.d7679bad.js"><link rel="prefetch" href="/assets/js/56.1e1cebb6.js"><link rel="prefetch" href="/assets/js/57.e552ebc4.js"><link rel="prefetch" href="/assets/js/58.c2253558.js"><link rel="prefetch" href="/assets/js/59.894648e3.js"><link rel="prefetch" href="/assets/js/6.dc744bea.js"><link rel="prefetch" href="/assets/js/60.d518c7e3.js"><link rel="prefetch" href="/assets/js/61.683e5b01.js"><link rel="prefetch" href="/assets/js/62.e77a2932.js"><link rel="prefetch" href="/assets/js/63.de13f230.js"><link rel="prefetch" href="/assets/js/64.5e811285.js"><link rel="prefetch" href="/assets/js/65.71f077b1.js"><link rel="prefetch" href="/assets/js/66.b65bc17e.js"><link rel="prefetch" href="/assets/js/67.44201295.js"><link rel="prefetch" href="/assets/js/68.52676de0.js"><link rel="prefetch" href="/assets/js/69.190d1315.js"><link rel="prefetch" href="/assets/js/70.be689ca4.js"><link rel="prefetch" href="/assets/js/71.7a47414f.js"><link rel="prefetch" href="/assets/js/72.9fe44768.js"><link rel="prefetch" href="/assets/js/73.d609fa3b.js"><link rel="prefetch" href="/assets/js/74.24541e12.js"><link rel="prefetch" href="/assets/js/75.28e53236.js"><link rel="prefetch" href="/assets/js/76.64ac0dbd.js"><link rel="prefetch" href="/assets/js/77.7f22398e.js"><link rel="prefetch" href="/assets/js/78.75145832.js"><link rel="prefetch" href="/assets/js/79.8742b244.js"><link rel="prefetch" href="/assets/js/80.7183e01e.js"><link rel="prefetch" href="/assets/js/82.c11b9a89.js"><link rel="prefetch" href="/assets/js/83.bc962d13.js"><link rel="prefetch" href="/assets/js/84.40399def.js"><link rel="prefetch" href="/assets/js/85.3123b233.js"><link rel="prefetch" href="/assets/js/86.e000b600.js"><link rel="prefetch" href="/assets/js/87.dfeb546b.js"><link rel="prefetch" href="/assets/js/88.df6d311a.js"><link rel="prefetch" href="/assets/js/89.1f7641d5.js"><link rel="prefetch" href="/assets/js/9.fc34caf5.js"><link rel="prefetch" href="/assets/js/90.9babbd7c.js"><link rel="prefetch" href="/assets/js/91.dedab5a4.js"><link rel="prefetch" href="/assets/js/92.911a772a.js"><link rel="prefetch" href="/assets/js/93.de8e895c.js"><link rel="prefetch" href="/assets/js/94.721d7399.js"><link rel="prefetch" href="/assets/js/95.055dfde2.js"><link rel="prefetch" href="/assets/js/96.f85bbcc2.js"><link rel="prefetch" href="/assets/js/97.34d5e61c.js"><link rel="prefetch" href="/assets/js/98.04aca43a.js"><link rel="prefetch" href="/assets/js/99.6e22c440.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0a7ee356.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d57f1eed.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/ops/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>监控</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ops/grafana/" class="nav-link">grafana</a></li><li class="dropdown-subitem"><a href="/ops/prometheus/" class="nav-link">prometheus</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/coreSystemCommand/" class="nav-link">《核心系统命令实战》</a></li><li class="dropdown-subitem"><a href="/note/MySQLnote/" class="nav-link">《MySQL 是怎样运行的：从根儿上理解 MySQL》</a></li><li class="dropdown-subitem"><a href="/note/ansible/" class="nav-link">《Ansible权威指南》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专题" class="dropdown-title"><a href="/topic/" class="link-title">专题</a> <span class="title" style="display:none;">专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56a2b5/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/d7e255/" class="nav-link">git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/program/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3281ff/" class="nav-link">python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂七杂八" class="dropdown-title"><a href="/zaqizaba/" class="link-title">杂七杂八</a> <span class="title" style="display:none;">杂七杂八</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docsDemo/" class="nav-link">文档编写规范</a></li><li class="dropdown-item"><!----> <a href="/usedcomputers/" class="nav-link">我用过的电脑</a></li><li class="dropdown-item"><!----> <a href="/buwuzhengye/" class="nav-link">喷涂相关</a></li><li class="dropdown-item"><!----> <a href="/liubing/" class="nav-link">每日一溜</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xiaoliutalk/xiaoliutalk.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://www.xiaoliutalk.cn/img/favicon.ico"> <div class="blogger-info"><h3>小刘说</h3> <span>砥砺前行</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/ops/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>监控</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ops/grafana/" class="nav-link">grafana</a></li><li class="dropdown-subitem"><a href="/ops/prometheus/" class="nav-link">prometheus</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/coreSystemCommand/" class="nav-link">《核心系统命令实战》</a></li><li class="dropdown-subitem"><a href="/note/MySQLnote/" class="nav-link">《MySQL 是怎样运行的：从根儿上理解 MySQL》</a></li><li class="dropdown-subitem"><a href="/note/ansible/" class="nav-link">《Ansible权威指南》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专题" class="dropdown-title"><a href="/topic/" class="link-title">专题</a> <span class="title" style="display:none;">专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56a2b5/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/d7e255/" class="nav-link">git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/program/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3281ff/" class="nav-link">python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂七杂八" class="dropdown-title"><a href="/zaqizaba/" class="link-title">杂七杂八</a> <span class="title" style="display:none;">杂七杂八</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docsDemo/" class="nav-link">文档编写规范</a></li><li class="dropdown-item"><!----> <a href="/usedcomputers/" class="nav-link">我用过的电脑</a></li><li class="dropdown-item"><!----> <a href="/buwuzhengye/" class="nav-link">喷涂相关</a></li><li class="dropdown-item"><!----> <a href="/liubing/" class="nav-link">每日一溜</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xiaoliutalk/xiaoliutalk.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>软考中级</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/8e92bf/" class="sidebar-link">计算机硬件基础</a></li><li><a href="/pages/0b76d4/" class="sidebar-link">操作系统概述</a></li><li><a href="/pages/f1470b/" class="sidebar-link">系统开发与项目管理基础</a></li><li><a href="/pages/f21b3c/" class="sidebar-link">知识产权</a></li><li><a href="/pages/635ab7/" class="sidebar-link">数据通信基础</a></li><li><a href="/pages/96ed7d/" class="sidebar-link">网络体系架构</a></li><li><a href="/pages/d9e27a/" class="sidebar-link">局域网技术</a></li><li><a href="/pages/1f35f7/" class="sidebar-link">广域网与接入网技术</a></li><li><a href="/pages/9471c8/" class="sidebar-link">因特网与网络互联技术</a></li><li><a href="/pages/f18b22/" class="sidebar-link">网络管理技术</a></li><li><a href="/pages/a5a942/" class="sidebar-link">网络安全技术</a></li><li><a href="/pages/13f346/" class="sidebar-link">网络规划与设计</a></li><li><a href="/pages/b2a126/" class="sidebar-link">Windows服务器配置</a></li><li><a href="/pages/8fe67b/" aria-current="page" class="active sidebar-link">Linux服务器配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/8fe67b/#_14-linux服务器配置" class="sidebar-link">14. Linux服务器配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8fe67b/#_14-1-dhcp服务器配置" class="sidebar-link">14.1. DHCP服务器配置</a></li><li class="sidebar-sub-header level3"><a href="/pages/8fe67b/#_14-2-dns配置" class="sidebar-link">14.2. DNS配置</a></li><li class="sidebar-sub-header level4"><a href="/pages/8fe67b/#_14-2-1-dns客户端配置" class="sidebar-link">14.2.1. DNS客户端配置</a></li><li class="sidebar-sub-header level4"><a href="/pages/8fe67b/#_14-2-2-dns服务器配置" class="sidebar-link">14.2.2. DNS服务器配置</a></li><li class="sidebar-sub-header level3"><a href="/pages/8fe67b/#_14-3-samba服务器配置" class="sidebar-link">14.3. Samba服务器配置</a></li><li class="sidebar-sub-header level3"><a href="/pages/8fe67b/#_14-4-ftp服务器配置" class="sidebar-link">14.4. FTP服务器配置</a></li><li class="sidebar-sub-header level3"><a href="/pages/8fe67b/#_14-5-apache服务器配置" class="sidebar-link">14.5. Apache服务器配置</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8fe67b/#" class="sidebar-link"></a></li></ul></li><li><a href="/pages/239db9/" class="sidebar-link">网络设备配置</a></li><li><a href="/pages/95edff/" class="sidebar-link">网络设备配置（路由器配置）</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>博客搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/topic/#专题" data-v-06225672>专题</a></li><li data-v-06225672><a href="/topic/#软考中级" data-v-06225672>软考中级</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>小刘</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-05-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Linux服务器配置<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="linux服务器配置"><a href="#linux服务器配置" class="header-anchor">#</a> Linux服务器配置</h1> <h2 id="_14-linux服务器配置"><a href="#_14-linux服务器配置" class="header-anchor">#</a> 14. Linux服务器配置</h2> <h3 id="_14-1-dhcp服务器配置"><a href="#_14-1-dhcp服务器配置" class="header-anchor">#</a> 14.1. DHCP服务器配置</h3> <p>安装：<code>yum -y install dhcp-server</code> 或者 <code>yum -y install dhcp</code>，根据系统版本选择。</p> <p>DHCP服务器的配置文件为：<code>/etc/dhcp/dhcpd.conf</code></p> <p><strong>dhcpd服务程序配置文件中常见参数及作用</strong>：</p> <p>标准参数类语句：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ddns-update-style none<span class="token punctuation">;</span> <span class="token comment"># 定义DNS服务动态更新的类型，包括 none(不支持动态更新)、interim(互动更新模式)、ad-hoc(特殊更新模式)</span>
<span class="token punctuation">[</span>allow <span class="token operator">|</span> ignore<span class="token punctuation">]</span> client-updates<span class="token punctuation">;</span>		<span class="token comment"># 允许/忽略客户端更新DNS记录</span>
default-lease-time <span class="token punctuation">[</span><span class="token number">21600</span><span class="token punctuation">]</span><span class="token punctuation">;</span>				<span class="token comment"># 默认租约时间，单位为秒（windows中为天）</span>
max-lease-time <span class="token punctuation">[</span><span class="token number">43200</span><span class="token punctuation">]</span><span class="token punctuation">;</span>					<span class="token comment"># 最大租约时间</span>
range<span class="token punctuation">;</span>									<span class="token comment"># 定义用于分配的IP地址池</span>
hardware ethernet 08:00:07:26:c0:a5<span class="token punctuation">;</span>	<span class="token comment"># 指明物理硬件接口类型和硬件地址。一般常与Fixed-address 语句一起使用实现IP地址的静态绑定。</span>
server-name <span class="token string">&quot;toccata.example.com&quot;</span><span class="token punctuation">;</span>		<span class="token comment"># 告知客户端所连接服务器的名字。</span>
fixed-address fantasia.example.com<span class="token punctuation">;</span>		<span class="token comment"># 指定一个或多个IP地址给一个DHCP客户，只能出现在host声明里。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>选项类语句：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>option subnet-mask mask<span class="token punctuation">;</span>			    <span class="token comment"># 子网掩码选项，服务开启后可用于所有客户端。</span>
option broadcast-address IP地址<span class="token punctuation">;</span>		   <span class="token comment"># 广播地址选项，服务开启后可用于所有客户端。</span>
option routers IP地址<span class="token punctuation">;</span>				   <span class="token comment"># 网关（路由）地址选项，可设多个。</span>
option domain-name-servers IP地址<span class="token punctuation">;</span>	   <span class="token comment"># DNS服务器IP地址，可用于所有客户端，可配置多个。</span>
option domain-name <span class="token string">&quot;dns.example.com&quot;</span><span class="token punctuation">;</span>	<span class="token comment"># dns服务器域名，可用于所有客户端。</span>
option host-name string<span class="token punctuation">;</span>				<span class="token comment"># 给客户指定主机名。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>/etc/dhcp/dhcpd.conf</code> 配置的声明与选项：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ddns-update-style none<span class="token punctuation">;</span>
subnet <span class="token number">192.168</span>.1.0 netmask <span class="token number">255.255</span>.255.0 <span class="token punctuation">{</span> <span class="token comment"># 指定DHCP服务器的作用域，作用在哪一个网段（子网网段声明）</span>
  option routers <span class="token number">192.168</span>.1.254<span class="token punctuation">;</span> 		   <span class="token comment"># 定义客户端的网关地址</span>
  option subnet-mask <span class="token number">255.255</span>.255.0<span class="token punctuation">;</span> 	   <span class="token comment"># 定义客户端的子网掩码</span>
  option domain-name <span class="token string">&quot;dns.example.com&quot;</span><span class="token punctuation">;</span>    <span class="token comment"># dns服务器域名</span>
  option domain-name-servers <span class="token number">192.168</span>.1.1<span class="token punctuation">;</span>  <span class="token comment"># dns服务器IP地址</span>
  range <span class="token number">192.168</span>.1.10 <span class="token number">192.168</span>.1.100<span class="token punctuation">;</span> 	   <span class="token comment"># 地址池分配范围</span>
<span class="token punctuation">}</span>
<span class="token comment"># 为特定的客户端分配IP地址</span>
<span class="token function">host</span> fantasia <span class="token punctuation">{</span>
  hardware ethernet 08:00:07:26:c0:a5<span class="token punctuation">;</span>	   <span class="token comment"># 指定物理接口和MAC地址</span>
  fixed-address <span class="token number">192.168</span>.1.20<span class="token punctuation">;</span>	   		   <span class="token comment"># 固定分配的IP地址</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>dhcpd.leases</strong> 是DHCP客户租约的数据库文件，默认目录在 <code>/var/lib/dhcpd</code> ，文件包含租约声明，每—次—个租约被获取、更新或释放， 它的新值就会被记录在文件的末端。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>lease <span class="token number">192.168</span>.1.10 <span class="token punctuation">{</span>
  starts <span class="token number">1</span> <span class="token number">2022</span>/10/24 06:42:10<span class="token punctuation">;</span> 		  <span class="token comment"># 租约起始时间</span>
  ends <span class="token number">1</span> <span class="token number">2022</span>/10/24 <span class="token number">18</span>:42:10<span class="token punctuation">;</span>			  <span class="token comment"># 租约过期时间</span>
  cltt <span class="token number">1</span> <span class="token number">2022</span>/10/24 06:42:10<span class="token punctuation">;</span>
  binding state active<span class="token punctuation">;</span>
  next binding state <span class="token function">free</span><span class="token punctuation">;</span>
  rewind binding state <span class="token function">free</span><span class="token punctuation">;</span>
  hardware ethernet 00:0c:29:e2:b9:d4<span class="token punctuation">;</span>	  <span class="token comment"># 获得租约的MAC地址</span>
  uid <span class="token string">&quot;<span class="token entity" title="\001">\001</span><span class="token entity" title="\000">\000</span><span class="token entity" title="\014">\014</span>)<span class="token entity" title="\342">\342</span><span class="token entity" title="\271">\271</span><span class="token entity" title="\324">\324</span>&quot;</span><span class="token punctuation">;</span>		  <span class="token comment"># ID信息</span>
  client-hostname <span class="token string">&quot;dhcp-client&quot;</span><span class="token punctuation">;</span>		  <span class="token comment"># 获得租约的主机名称</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>启动和停止DHCP服务：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> dhcpd <span class="token punctuation">[</span>start<span class="token operator">|</span>stop<span class="token operator">|</span>restart<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_14-2-dns配置"><a href="#_14-2-dns配置" class="header-anchor">#</a> 14.2. DNS配置</h3> <h4 id="_14-2-1-dns客户端配置"><a href="#_14-2-1-dns客户端配置" class="header-anchor">#</a> 14.2.1. DNS客户端配置</h4> <p><code>/etc/resolv.conf</code>  配置的声明与选项：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Generated by NetworkManager</span>
search dns.example.com					  <span class="token comment"># 当提供了一个不包含完全域名的主机名时，如server，在该主机名后添加dns.example.com的后缀</span>
nameserver <span class="token number">192.168</span>.1.3					  <span class="token comment"># DNS服务器IP地址</span>
order host,bind							  <span class="token comment"># DNS解析顺序：本机缓存、host文件、本地DNS服务器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_14-2-2-dns服务器配置"><a href="#_14-2-2-dns服务器配置" class="header-anchor">#</a> 14.2.2. DNS服务器配置</h4> <p>安装：<code>yum -y install bind</code></p> <p>DNS服务器的配置文件为：<code>/etc/named.conf</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>//单行注释类型
/*
  多行注释
*/

acl acl-name <span class="token punctuation">{</span>    address_match_list<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>		<span class="token comment"># 定义IP地址列表，用于访问控制或者其他用途</span>
options
<span class="token punctuation">{</span>
	directory <span class="token string">&quot;/var/named&quot;</span><span class="token punctuation">;</span>					<span class="token comment"># 指定服务器的工作目录</span>
	listen-on port <span class="token number">53</span> <span class="token punctuation">{</span> any<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> 			<span class="token comment"># 监听IPv4的53端口，any表示任意客户端都可以访问</span>
	listen-on-v6 port <span class="token number">53</span> <span class="token punctuation">{</span> any<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 			<span class="token comment"># 监听IPv6的53端口，any表示任意客户端都可以访问</span>
	allow-query <span class="token punctuation">{</span> any<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  					<span class="token comment"># 面向所有源IP提供解析服务</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
view view-name <span class="token punctuation">{</span>							<span class="token comment"># 根据客户端的IP地址不同，有区别地返回对域名的查询结果，如内网访问 www.xx.com，如果IP地址段为 192.168.1.0/24，则返回ip地址为 192.168.3.120，如果外网访问www.xx.com，则返回ip地址为 47.94.195.139</span>
		match-clients <span class="token punctuation">{</span> localhost<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>		<span class="token comment"># 匹配的客户端，根据上文ACL去控制，any表示所有</span>
        zone <span class="token string">&quot;.&quot;</span> IN <span class="token punctuation">{</span>						<span class="token comment"># &quot;.&quot; 代表根区域</span>
                <span class="token builtin class-name">type</span> hint<span class="token punctuation">;</span>					<span class="token comment"># hint 代表根域名服务器</span>
                <span class="token function">file</span> <span class="token string">&quot;/var/named/named.ca&quot;</span><span class="token punctuation">;</span> <span class="token comment"># 对应的区域文件</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        zone <span class="token string">&quot;xiaoliutalk.cn&quot;</span> IN <span class="token punctuation">{</span>				<span class="token comment"># 正向查找区域，实现域名到IP地址的映射</span>
                <span class="token builtin class-name">type</span> master<span class="token punctuation">;</span>				<span class="token comment"># master 为主域名（权威）服务器，type设置成slave，表示此服务器为辅助域名服务器，type设置成forward，表示此服务器为转发域名服务器。</span>
                <span class="token function">file</span> <span class="token string">&quot;/var/named/xiaoliutalk.cn.zone&quot;</span><span class="token punctuation">;</span><span class="token comment"># 对应的区域文件</span>
                allow-update <span class="token punctuation">{</span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        zone <span class="token string">&quot;1.168.192.in-addr.arpa&quot;</span> IN <span class="token punctuation">{</span>	<span class="token comment"># 这个IP需要反着写（192.168.1.100）：1.168.192</span>
                <span class="token builtin class-name">type</span> master<span class="token punctuation">;</span>
                <span class="token function">file</span> <span class="token string">&quot;/var/named/192.168.1.loopback&quot;</span><span class="token punctuation">;</span>
                allow-update <span class="token punctuation">{</span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>根服务器文件named.ca：<code>/var/named/named.ca</code> 是—个非常重要的文件，该文件包含了 Internet 的根域名服务器名称和对应的IP地址， Bind接到客户端主机查询请求时， 如果在Cache 中找不到相应的数据， 就会通过根服务器进行逐级查询。
如果文件内容有误， 客户端将在向自身缓存无法完成IP地址的解析。named.ca 文件可以通过 Internet 进行下载。</p> <p><strong>正向查找配置</strong>：</p> <p>区（zone）文件配置：</p> <p>在指定的目录下创建zone文件名称 <code>xiaoliutalk.cn.zone</code> 内容如下。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// 域名记录的默认TTL值
<span class="token variable">$TTL</span> <span class="token number">86400</span>
// SOA 代表权威域名服务器，可以指出权威域名服务器地址，以及管理员邮件地址，邮件格式为manager@xiaoliutalk.cn，但是这样写会报错，所以把@修改成 <span class="token builtin class-name">.</span>
@       IN SOA dns.xiaoliutalk.cn. manager.xiaoliutalk.cn. <span class="token punctuation">(</span>
                <span class="token number">1</span>       <span class="token punctuation">;</span>Serial
                3h      <span class="token punctuation">;</span>Refresh after <span class="token number">3</span> hours
                1h      <span class="token punctuation">;</span>Retry after <span class="token number">1</span> hour
                1w      <span class="token punctuation">;</span>Expire after <span class="token number">1</span> week
                1h<span class="token punctuation">)</span>     <span class="token punctuation">;</span>Negative caching TTL of <span class="token number">1</span> hour
<span class="token punctuation">;</span>
// 添加域名服务器记录：域名服务器又称为NS记录，在区域文件中用千设置当前区域的DNS服务器名称，“@”符号在区域文件中代表默认的域（ 当前域）
@       IN NS dns.xiaoliutalk.cn.
<span class="token punctuation">;</span>
<span class="token punctuation">;</span>server domain
<span class="token punctuation">;</span>
// A记录
dns     <span class="token number">3600</span>    IN      A       <span class="token number">192.168</span>.1.3
www     <span class="token number">300</span>     IN      A       <span class="token number">192.168</span>.1.3
// CNAME记录
a       <span class="token number">20</span>      IN      CNAME   www
mail    <span class="token number">300</span>     IN      A       <span class="token number">192.168</span>.1.3
<span class="token punctuation">;</span>
<span class="token punctuation">;</span>mail server
<span class="token punctuation">;</span>
// 添加邮件交换记录：邮件交换记录又称MX记录，用于设置在当前区域中提供邮件服务的服务器名称。
@       <span class="token number">3600</span>    IN      MX      <span class="token number">10</span> mail
<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p><strong>反向查找配置</strong>：</p> <p>在指定的目录下创建文件名称 <code>192.168.1.loopback</code> 内容如下。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token variable">$TTL</span> <span class="token number">86400</span>
// SOA 代表权威域名服务器，可以指出权威域名服务器地址，以及管理员邮件地址，邮件格式为manager@xiaoliutalk.cn，但是这样写会报错，所以把@修改成 <span class="token builtin class-name">.</span>
@       IN SOA  dns.xiaoliutalk.cn. manager.xiaoliutalk.cn. <span class="token punctuation">(</span>
                                        <span class="token number">0</span>       <span class="token punctuation">;</span> serial
                                        1D      <span class="token punctuation">;</span> refresh
                                        1H      <span class="token punctuation">;</span> retry
                                        1W      <span class="token punctuation">;</span> expire
                                        3H <span class="token punctuation">)</span>    <span class="token punctuation">;</span> minimum
// 当前区域的DNS服务器名称
        NS      dns.xiaoliutalk.cn.
// PTR记录为IP地址到域名的映射关系，只用写IP地址最后一段（即第四段）
<span class="token number">100</span>        PTR     ftp1.xiaoliutalk.cn.
<span class="token number">101</span>        PTR     ftp2.xiaoliutalk.cn.
<span class="token number">102</span>        PTR     ftp3.xiaoliutalk.cn.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>配置DNS均衡负载功能</strong>：</p> <p>在企业网中需要使用三台内容相同的FTP 服务器共同承担客户对网站的访问， 他们的IP地址分别对应192.168.1.21 、192.168.1.22和192.168.1.23。现只要在DNS 服务器的区域文件中加入以下三条A记录，就可以实现三台FTP服务器的网络负载均衡功能。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ftp</span> IN A <span class="token number">192.168</span>.1.21
<span class="token function">ftp</span> IN A <span class="token number">192.168</span>.1.22
<span class="token function">ftp</span> IN A <span class="token number">192.168</span>.1.23
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>启动和停止DNS服务：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> named <span class="token punctuation">[</span>start<span class="token operator">|</span>stop<span class="token operator">|</span>restart<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_14-3-samba服务器配置"><a href="#_14-3-samba服务器配置" class="header-anchor">#</a> 14.3. Samba服务器配置</h3> <p>Smbd : 提供对服务器中文件、打印资源的共享访问。
Nmbd ：提供基于NetBIOS的主机名解析， 通过NetBIOS协议， 利用共享的端口号实现文件信息的传输及共享。例： 445端口
注： Samba 可以提供跨系统的文件、打印共享服务，不同系统之间可通过Samba服务器对文件、打印机的相互访问。</p> <p>安装：<code>yum -y install samba</code></p> <p>Samba服务器的配置文件为：<code>/etc/samba/smb.conf</code></p> <p><code>smb.conf</code> 文件有三个重要部分：</p> <ul><li><strong>全局参数字段（global）</strong>：主机<strong>共享时的整体设置</strong>， 例如允许哪些主机访问共享资源或哪些主机可以进行资源共享。</li> <li><strong>目录共享字段（homes）</strong>：该部分为<strong>用户目录共享设置</strong>， 设置对应 samba 用户宿主目录的默认共享，即当前用户访问服务器中域自己用户名相同的共享文件夹时， 会默认映射到自己的宿主目录。</li> <li><strong>打印机共享字段（printers）</strong>：<strong>打印机的配置和共享</strong>。例如允许哪些主机使用打印机等。</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>global<span class="token punctuation">]</span>
<span class="token comment"># 共享级别(模式)：</span>
<span class="token comment"># user：需要用户名和密码，账号密码由本机验证。</span>
<span class="token comment"># Share：共享不需要用户名和密码，所有主机可访问。</span>
<span class="token comment"># server：服务器需要用户名和密码，账号密码由另一台服务器验证。</span>
<span class="token comment"># domain：服务器需要用户名和密码，账号密码由域服务器验证。</span>
<span class="token comment"># 安全级别： domain &gt; server &gt; user &gt; Share</span>
        security <span class="token operator">=</span> <span class="token punctuation">[</span>user<span class="token operator">|</span>share<span class="token operator">|</span>server<span class="token operator">|</span>domain<span class="token punctuation">]</span> 
        netbios name <span class="token operator">=</span> MYSERVER						<span class="token comment"># 主机名称</span>
        workgroup <span class="token operator">=</span> MYGROUP							<span class="token comment"># 可自行设定工作组，WORKGROUP组</span>
        server string <span class="token operator">=</span> Samba Server Version %v		<span class="token comment"># 主机描述信息</span>
		hosts allow <span class="token operator">=</span> <span class="token number">127</span>. <span class="token number">192.168</span>.12. <span class="token number">192.168</span>.13.	<span class="token comment"># 允许访问服务器的主机IP地址范围，如只允许一台主机，写IP地址即可。</span>
<span class="token punctuation">[</span>homes<span class="token punctuation">]</span>
        comment <span class="token operator">=</span> Home Directories					<span class="token comment"># 共享目录信息描述</span>
        browseable <span class="token operator">=</span> No								<span class="token comment"># 是否可以被浏览</span>
        <span class="token builtin class-name">read</span> only <span class="token operator">=</span> No								<span class="token comment"># 是否只读</span>
        create mask <span class="token operator">=</span> 0755							<span class="token comment"># 与Linux权限相同，新创建文件默认权限值</span>
		directory mask <span class="token operator">=</span> 0755						<span class="token comment"># 与Linux权限相同，新创建目录默认权限值</span>
<span class="token punctuation">[</span>printers<span class="token punctuation">]</span>
        comment <span class="token operator">=</span> All Printers						<span class="token comment"># 打印机描述，All Printers指网络中所有打印机</span>
        path <span class="token operator">=</span> /var/tmp
        valid <span class="token function">users</span> <span class="token operator">=</span> jack,@root					<span class="token comment"># 指定用户可使用打印机，目前为管理员和JACK</span>
        browseable <span class="token operator">=</span> No								<span class="token comment"># 是否可以被浏览</span>
        guest ok <span class="token operator">=</span> Yes								<span class="token comment"># 访客是否允许使用打印机，等同于 public = Yes</span>
        writable <span class="token operator">=</span> Yes								<span class="token comment"># 打印机资源是否允许被写入，等同于 read only = No</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>Samba用户管理：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">useradd</span> smb_user1 <span class="token comment"># 添加用户信息</span>
password smb_user1 <span class="token comment"># 添加对应用户密码</span>
smbpasswd <span class="token parameter variable">-a</span> smb_user1 <span class="token comment"># 将用户与密码与Samba服务器关联</span>
<span class="token function">more</span> /etc/samba/smbpasswd <span class="token comment"># 查看smbpasswd 文件中用户信息</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>启动和停止Samba服务：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> smb <span class="token punctuation">[</span>start<span class="token operator">|</span>stop<span class="token operator">|</span>restart<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_14-4-ftp服务器配置"><a href="#_14-4-ftp服务器配置" class="header-anchor">#</a> 14.4. FTP服务器配置</h3> <p>安装：<code>yum -y install vsftpd</code></p> <p>FTP服务器的配置文件为：<code>/etc/vsftpd/vsftpd.conf</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">listen</span><span class="token operator">=</span>NO							<span class="token comment"># 是否以独立模式（standalone）运行监听FTP服务</span>
<span class="token assign-left variable">listen_address</span><span class="token operator">=</span><span class="token number">192.168</span>.1.3			<span class="token comment"># 设置被监听的IP地址</span>
<span class="token assign-left variable">listen_port</span><span class="token operator">=</span><span class="token number">21</span>						<span class="token comment"># 设置监听FTP服务的端口号</span>
<span class="token assign-left variable">write_enable</span><span class="token operator">=</span>YES					<span class="token comment"># 是否启用写入权限</span>
<span class="token assign-left variable">download_enable</span><span class="token operator">=</span>YES					<span class="token comment"># 是否允许下载文件</span>
<span class="token assign-left variable">userlist_enable</span><span class="token operator">=</span>YES					<span class="token comment"># 是否启用user_list列表文件</span>
<span class="token assign-left variable">userlist_deny</span><span class="token operator">=</span>YES					<span class="token comment"># 是否禁用user_list中的用户</span>
<span class="token assign-left variable">max_clients</span><span class="token operator">=</span><span class="token number">0</span>						<span class="token comment"># 限制客户端并发连接数</span>
<span class="token assign-left variable">max_per_ip</span><span class="token operator">=</span><span class="token number">0</span>						<span class="token comment"># 限制同一IP地址的并发连接数</span>
<span class="token assign-left variable">anonymous_enable</span><span class="token operator">=</span>YES				<span class="token comment"># 是否启用匿名访问</span>
<span class="token assign-left variable">local_enable</span><span class="token operator">=</span>YES					<span class="token comment"># 是否启用本地用户</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>user_list 文件：user_list 文件具有对 vsftpd 服务器很灵活的用户访问控制，绝对路径是 <code>/etc/vsftpd/user_list</code>，使用 user_list 需要在主配置文件中配置。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 设置禁止user_list文件中的用户登录（黑名单）</span>
<span class="token assign-left variable">userlist_enable</span><span class="token operator">=</span>YES					
<span class="token assign-left variable">userlist_deny</span><span class="token operator">=</span>YES	
<span class="token comment"># 设置只允许user_list文件中的用户登录（白名单）</span>
<span class="token assign-left variable">userlist_enable</span><span class="token operator">=</span>YES					
<span class="token assign-left variable">userlist_deny</span><span class="token operator">=</span>NO	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>启动和停止Samba服务：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> vsftpd <span class="token punctuation">[</span>start<span class="token operator">|</span>stop<span class="token operator">|</span>restart<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_14-5-apache服务器配置"><a href="#_14-5-apache服务器配置" class="header-anchor">#</a> 14.5. Apache服务器配置</h3> <p>安装：<code>yum -y install httpd</code></p> <p>Apache服务器的配置文件为：<code>/etc/httpd/conf/httpd.conf</code></p> <p>httpd.conf 中的全局配置：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ServerRoot <span class="token string">&quot;/etc/httpd&quot;</span>				<span class="token comment"># 设置Apache服务器的根(Root) 目录</span>
ServerAdmin root@localhost			<span class="token comment"># 设置Apache服务器管理员的email地址</span>
ServerName localhost				<span class="token comment"># 设置Apache服务器的主机名</span>
DocumentRoot <span class="token string">&quot;/var/www/html&quot;</span>		<span class="token comment"># 设置Apache服务器网页存放目录</span>
Listen <span class="token number">80</span> 							<span class="token comment"># 设置Apache服务器监听的网络端口号</span>
ErrorLog <span class="token string">&quot;logs/error_log&quot;</span>			<span class="token comment"># 设置Apache服务器中错误日志文件的路径和文件名</span>
CustomLog <span class="token string">&quot;logs/access_log&quot;</span> combined<span class="token comment"># 设置Apache服务器中访问日志文件的路径和格式类型</span>
Timeout								<span class="token comment"># 设置Apache服务器与浏览器之间网络连接的超时时间。单位：秒，默认120</span>
KeepAlive							<span class="token comment"># 设置为Off时服务器不使用保待连功能，传输的效率比较低，设置为On（默认）时，可以提高服务器传输文件的效率，建议设置保持连接功能有效</span>
MaxKeep Alive Requests				<span class="token comment"># 当KeepAlive为on时，设置客户端每次连接允许请求响应的最大文件数，默认设置为100个文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>虚拟Web主机：即在同—台服务器中运行多个Web站点的应用，其中每—个站点并不独立占用—台真正的计算机。</p> <p><strong>Apache支持的虚拟主机类型</strong>：</p> <ul><li><strong>基于域名</strong>的虚拟主机</li> <li><strong>基于IP地址</strong>的虚拟主机</li> <li><strong>基于端口</strong>的虚拟主机</li></ul> <p>基于域名的虚拟主机：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>NameVirtualHost 173.17.17.11
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name">173.17.17.11</span><span class="token punctuation">&gt;</span></span>
　　DocumentRoot &quot;/tmp/111&quot;
　　ServerName www.111.com
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name">173.17.17.11</span><span class="token punctuation">&gt;</span></span>
　　DocumentRoot &quot;/tmp/222&quot;
　　ServerName www.222.com
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>基于IP地址的虚拟主机：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name">173.17.17.11</span><span class="token punctuation">&gt;</span></span>
　　DocumentRoot &quot;/tmp/111&quot;
　　ServerName www.111.com
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name">173.17.17.12</span><span class="token punctuation">&gt;</span></span>
　　DocumentRoot &quot;/tmp/222&quot;
　　ServerName www.222.com
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>基于端口号的虚拟主机：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>Listen 173.17.17.11:80
Listen 173.17.17.11:8080
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">173.17.17.11:</span>80</span><span class="token punctuation">&gt;</span></span>
　　DocumentRoot &quot;/tmp/111&quot;
　　ServerName www.111.com
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">173.17.17.11:</span>8080</span><span class="token punctuation">&gt;</span></span>
　　DocumentRoot &quot;/tmp/222&quot;
　　ServerName www.222.com
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>启动和停止Apache服务：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> httpd <span class="token punctuation">[</span>start<span class="token operator">|</span>stop<span class="token operator">|</span>restart<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id=""><a href="#" class="header-anchor">#</a></h2></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/01/08, 16:31:23</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/b2a126/" class="prev">Windows服务器配置</a></span> <span class="next"><a href="/pages/239db9/">网络设备配置</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/82c021/"><div>
            kubernetes控制器-Service
            <!----></div></a> <span class="date">08-18</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/d5cb3c/"><div>
            kubernetes控制器-Deployment
            <!----></div></a> <span class="date">08-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/e33737/"><div>
            kubernetes调度基础
            <!----></div></a> <span class="date">07-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:248920070@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xiaoliutalk" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/xiaoliuTalk" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span><a href="https://ipw.cn/ipv6webcheck/?site=www.xiaoliutalk.cn" title="本站支持IPv6访问" target="_blank"><img style="display:inline-block;vertical-align:middle" alt="本站支持IPv6访问" src="https://static.ipw.cn/icon/ipv6-s3.svg"></a>         <a href="https://ipw.cn/ssl/?site=www.xiaoliutalk.cn" title="本站支持SSL安全访问" target="_blank"><img style="display:inline-block;vertical-align:middle" alt="本站支持SSL安全访问" src="https://static.ipw.cn/icon/ssl-s3.svg"></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:10px;bottom:0px;width:135px;height:200px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="200" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:200px;"></canvas></div><div></div></div></div>
    <script src="/assets/js/app.44d32a86.js" defer></script><script src="/assets/js/3.5c73636d.js" defer></script><script src="/assets/js/2.db635a7e.js" defer></script><script src="/assets/js/81.459fdba1.js" defer></script>
  </body>
</html>
