<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>kubernetes基础概念-Pod</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="小刘Talk">
    <meta name="keywords" content="博客,个人技术博客,运维,运维开发,技术文档,学习,面试,shell,linux,python,git,github,markdown,mysql,k8s,kubernetes">
    <meta name="baidu-site-verification" content="codeva-0ulOnZ5mxo">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d57f1eed.css" as="style"><link rel="preload" href="/assets/js/app.44d32a86.js" as="script"><link rel="preload" href="/assets/js/3.5c73636d.js" as="script"><link rel="preload" href="/assets/js/2.db635a7e.js" as="script"><link rel="preload" href="/assets/js/49.ecb5c6e0.js" as="script"><link rel="prefetch" href="/assets/js/1.e72d3a41.js"><link rel="prefetch" href="/assets/js/10.470c875d.js"><link rel="prefetch" href="/assets/js/100.7694e90b.js"><link rel="prefetch" href="/assets/js/101.de773466.js"><link rel="prefetch" href="/assets/js/102.e43f5886.js"><link rel="prefetch" href="/assets/js/103.aca15b97.js"><link rel="prefetch" href="/assets/js/104.e24987b7.js"><link rel="prefetch" href="/assets/js/105.8bd03527.js"><link rel="prefetch" href="/assets/js/106.7fdba3dc.js"><link rel="prefetch" href="/assets/js/107.5fae7fa1.js"><link rel="prefetch" href="/assets/js/108.f94c3bca.js"><link rel="prefetch" href="/assets/js/109.2c9d1cb9.js"><link rel="prefetch" href="/assets/js/11.55f1c469.js"><link rel="prefetch" href="/assets/js/110.3fed7898.js"><link rel="prefetch" href="/assets/js/111.0d7db2f7.js"><link rel="prefetch" href="/assets/js/112.9b58d506.js"><link rel="prefetch" href="/assets/js/113.34d227b2.js"><link rel="prefetch" href="/assets/js/114.e9ad4589.js"><link rel="prefetch" href="/assets/js/115.44a97d6b.js"><link rel="prefetch" href="/assets/js/116.1f447402.js"><link rel="prefetch" href="/assets/js/117.cf394d3b.js"><link rel="prefetch" href="/assets/js/118.6d145301.js"><link rel="prefetch" href="/assets/js/119.699a5b7f.js"><link rel="prefetch" href="/assets/js/12.ace28f5c.js"><link rel="prefetch" href="/assets/js/13.fe678adb.js"><link rel="prefetch" href="/assets/js/14.c4c56345.js"><link rel="prefetch" href="/assets/js/15.64878322.js"><link rel="prefetch" href="/assets/js/16.8c8ec038.js"><link rel="prefetch" href="/assets/js/17.51ce6f53.js"><link rel="prefetch" href="/assets/js/18.442ae8be.js"><link rel="prefetch" href="/assets/js/19.26a7830a.js"><link rel="prefetch" href="/assets/js/20.dccf36d3.js"><link rel="prefetch" href="/assets/js/21.93b93844.js"><link rel="prefetch" href="/assets/js/22.38e4c041.js"><link rel="prefetch" href="/assets/js/23.3a0f8d61.js"><link rel="prefetch" href="/assets/js/24.413b5042.js"><link rel="prefetch" href="/assets/js/25.4a54145c.js"><link rel="prefetch" href="/assets/js/26.873467b0.js"><link rel="prefetch" href="/assets/js/27.ef81b63e.js"><link rel="prefetch" href="/assets/js/28.e2b2c0e2.js"><link rel="prefetch" href="/assets/js/29.4a63077a.js"><link rel="prefetch" href="/assets/js/30.f238d48e.js"><link rel="prefetch" href="/assets/js/31.20151c7b.js"><link rel="prefetch" href="/assets/js/32.789d4b08.js"><link rel="prefetch" href="/assets/js/33.77a02530.js"><link rel="prefetch" href="/assets/js/34.e80359b2.js"><link rel="prefetch" href="/assets/js/35.7735b97c.js"><link rel="prefetch" href="/assets/js/36.5d720e2d.js"><link rel="prefetch" href="/assets/js/37.f22b373b.js"><link rel="prefetch" href="/assets/js/38.2b1182b1.js"><link rel="prefetch" href="/assets/js/39.0bc42f00.js"><link rel="prefetch" href="/assets/js/4.4513d890.js"><link rel="prefetch" href="/assets/js/40.8e27bbe7.js"><link rel="prefetch" href="/assets/js/41.06d0a91c.js"><link rel="prefetch" href="/assets/js/42.d0918d04.js"><link rel="prefetch" href="/assets/js/43.e9cc4f5a.js"><link rel="prefetch" href="/assets/js/44.1c5d322b.js"><link rel="prefetch" href="/assets/js/45.eddf4d4f.js"><link rel="prefetch" href="/assets/js/46.2436424e.js"><link rel="prefetch" href="/assets/js/47.5bbd7b8f.js"><link rel="prefetch" href="/assets/js/48.6666c1dd.js"><link rel="prefetch" href="/assets/js/5.8eeb4257.js"><link rel="prefetch" href="/assets/js/50.cb07db14.js"><link rel="prefetch" href="/assets/js/51.1a49d9f3.js"><link rel="prefetch" href="/assets/js/52.c9b35342.js"><link rel="prefetch" href="/assets/js/53.ab8c2c92.js"><link rel="prefetch" href="/assets/js/54.d8b74f67.js"><link rel="prefetch" href="/assets/js/55.d7679bad.js"><link rel="prefetch" href="/assets/js/56.1e1cebb6.js"><link rel="prefetch" href="/assets/js/57.e552ebc4.js"><link rel="prefetch" href="/assets/js/58.c2253558.js"><link rel="prefetch" href="/assets/js/59.894648e3.js"><link rel="prefetch" href="/assets/js/6.dc744bea.js"><link rel="prefetch" href="/assets/js/60.d518c7e3.js"><link rel="prefetch" href="/assets/js/61.683e5b01.js"><link rel="prefetch" href="/assets/js/62.e77a2932.js"><link rel="prefetch" href="/assets/js/63.de13f230.js"><link rel="prefetch" href="/assets/js/64.5e811285.js"><link rel="prefetch" href="/assets/js/65.71f077b1.js"><link rel="prefetch" href="/assets/js/66.b65bc17e.js"><link rel="prefetch" href="/assets/js/67.44201295.js"><link rel="prefetch" href="/assets/js/68.52676de0.js"><link rel="prefetch" href="/assets/js/69.190d1315.js"><link rel="prefetch" href="/assets/js/70.be689ca4.js"><link rel="prefetch" href="/assets/js/71.7a47414f.js"><link rel="prefetch" href="/assets/js/72.9fe44768.js"><link rel="prefetch" href="/assets/js/73.d609fa3b.js"><link rel="prefetch" href="/assets/js/74.24541e12.js"><link rel="prefetch" href="/assets/js/75.28e53236.js"><link rel="prefetch" href="/assets/js/76.64ac0dbd.js"><link rel="prefetch" href="/assets/js/77.7f22398e.js"><link rel="prefetch" href="/assets/js/78.75145832.js"><link rel="prefetch" href="/assets/js/79.8742b244.js"><link rel="prefetch" href="/assets/js/80.7183e01e.js"><link rel="prefetch" href="/assets/js/81.459fdba1.js"><link rel="prefetch" href="/assets/js/82.c11b9a89.js"><link rel="prefetch" href="/assets/js/83.bc962d13.js"><link rel="prefetch" href="/assets/js/84.40399def.js"><link rel="prefetch" href="/assets/js/85.3123b233.js"><link rel="prefetch" href="/assets/js/86.e000b600.js"><link rel="prefetch" href="/assets/js/87.dfeb546b.js"><link rel="prefetch" href="/assets/js/88.df6d311a.js"><link rel="prefetch" href="/assets/js/89.1f7641d5.js"><link rel="prefetch" href="/assets/js/9.fc34caf5.js"><link rel="prefetch" href="/assets/js/90.9babbd7c.js"><link rel="prefetch" href="/assets/js/91.dedab5a4.js"><link rel="prefetch" href="/assets/js/92.911a772a.js"><link rel="prefetch" href="/assets/js/93.de8e895c.js"><link rel="prefetch" href="/assets/js/94.721d7399.js"><link rel="prefetch" href="/assets/js/95.055dfde2.js"><link rel="prefetch" href="/assets/js/96.f85bbcc2.js"><link rel="prefetch" href="/assets/js/97.34d5e61c.js"><link rel="prefetch" href="/assets/js/98.04aca43a.js"><link rel="prefetch" href="/assets/js/99.6e22c440.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0a7ee356.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d57f1eed.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/ops/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>监控</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ops/grafana/" class="nav-link">grafana</a></li><li class="dropdown-subitem"><a href="/ops/prometheus/" class="nav-link">prometheus</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/coreSystemCommand/" class="nav-link">《核心系统命令实战》</a></li><li class="dropdown-subitem"><a href="/note/MySQLnote/" class="nav-link">《MySQL 是怎样运行的：从根儿上理解 MySQL》</a></li><li class="dropdown-subitem"><a href="/note/ansible/" class="nav-link">《Ansible权威指南》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专题" class="dropdown-title"><a href="/topic/" class="link-title">专题</a> <span class="title" style="display:none;">专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56a2b5/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/d7e255/" class="nav-link">git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/program/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3281ff/" class="nav-link">python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂七杂八" class="dropdown-title"><a href="/zaqizaba/" class="link-title">杂七杂八</a> <span class="title" style="display:none;">杂七杂八</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docsDemo/" class="nav-link">文档编写规范</a></li><li class="dropdown-item"><!----> <a href="/usedcomputers/" class="nav-link">我用过的电脑</a></li><li class="dropdown-item"><!----> <a href="/buwuzhengye/" class="nav-link">喷涂相关</a></li><li class="dropdown-item"><!----> <a href="/liubing/" class="nav-link">每日一溜</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xiaoliutalk/xiaoliutalk.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://www.xiaoliutalk.cn/img/favicon.ico"> <div class="blogger-info"><h3>小刘说</h3> <span>砥砺前行</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/ops/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>监控</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ops/grafana/" class="nav-link">grafana</a></li><li class="dropdown-subitem"><a href="/ops/prometheus/" class="nav-link">prometheus</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/coreSystemCommand/" class="nav-link">《核心系统命令实战》</a></li><li class="dropdown-subitem"><a href="/note/MySQLnote/" class="nav-link">《MySQL 是怎样运行的：从根儿上理解 MySQL》</a></li><li class="dropdown-subitem"><a href="/note/ansible/" class="nav-link">《Ansible权威指南》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专题" class="dropdown-title"><a href="/topic/" class="link-title">专题</a> <span class="title" style="display:none;">专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56a2b5/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/d7e255/" class="nav-link">git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/program/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3281ff/" class="nav-link">python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂七杂八" class="dropdown-title"><a href="/zaqizaba/" class="link-title">杂七杂八</a> <span class="title" style="display:none;">杂七杂八</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docsDemo/" class="nav-link">文档编写规范</a></li><li class="dropdown-item"><!----> <a href="/usedcomputers/" class="nav-link">我用过的电脑</a></li><li class="dropdown-item"><!----> <a href="/buwuzhengye/" class="nav-link">喷涂相关</a></li><li class="dropdown-item"><!----> <a href="/liubing/" class="nav-link">每日一溜</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xiaoliutalk/xiaoliutalk.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>zabbix</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>kubernetes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/4cc6e9/" class="sidebar-link">二进制安装高可用k8s集群（v1.25.0）</a></li><li><a href="/pages/b73afa/" class="sidebar-link">二进制安装高可用k8s集群（v1.27.2）</a></li><li><a href="/pages/4593b8/" class="sidebar-link">kubernetes架构解析</a></li><li><a href="/pages/721478/" aria-current="page" class="active sidebar-link">kubernetes基础概念-Pod</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/721478/#_1-pod概念" class="sidebar-link">1. Pod概念</a></li><li class="sidebar-sub-header level2"><a href="/pages/721478/#_2-为什么需要pod" class="sidebar-link">2. 为什么需要Pod</a></li><li class="sidebar-sub-header level2"><a href="/pages/721478/#_3-pod使用" class="sidebar-link">3. Pod使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/721478/#_3-1-创建pod" class="sidebar-link">3.1. 创建Pod</a></li><li class="sidebar-sub-header level3"><a href="/pages/721478/#_3-2-pod的状态" class="sidebar-link">3.2. Pod的状态</a></li><li class="sidebar-sub-header level4"><a href="/pages/721478/#_3-2-1-phase" class="sidebar-link">3.2.1. Phase</a></li><li class="sidebar-sub-header level4"><a href="/pages/721478/#_3-2-3-conditions" class="sidebar-link">3.2.3. Conditions</a></li><li class="sidebar-sub-header level3"><a href="/pages/721478/#_3-3-pod的探针-健康检查" class="sidebar-link">3.3. Pod的探针（健康检查）</a></li><li class="sidebar-sub-header level4"><a href="/pages/721478/#_3-3-1-探测类型" class="sidebar-link">3.3.1. 探测类型</a></li><li class="sidebar-sub-header level4"><a href="/pages/721478/#_3-3-2-检查机制" class="sidebar-link">3.3.2. 检查机制</a></li><li class="sidebar-sub-header level4"><a href="/pages/721478/#_3-3-3-探测结果" class="sidebar-link">3.3.3. 探测结果</a></li><li class="sidebar-sub-header level3"><a href="/pages/721478/#_3-4-镜像拉取策略和pod恢复策略" class="sidebar-link">3.4. 镜像拉取策略和Pod恢复策略</a></li><li class="sidebar-sub-header level4"><a href="/pages/721478/#_3-4-1-镜像拉取策略" class="sidebar-link">3.4.1. 镜像拉取策略</a></li><li class="sidebar-sub-header level4"><a href="/pages/721478/#_3-4-2-pod恢复策略" class="sidebar-link">3.4.2. Pod恢复策略</a></li><li class="sidebar-sub-header level3"><a href="/pages/721478/#_3-5-容器生命周期回调" class="sidebar-link">3.5. 容器生命周期回调</a></li></ul></li></ul></li><li><a href="/pages/e33737/" class="sidebar-link">kubernetes调度基础</a></li><li><a href="/pages/d5cb3c/" class="sidebar-link">kubernetes控制器-Deployment</a></li><li><a href="/pages/82c021/" class="sidebar-link">kubernetes控制器-Service</a></li><li><a href="/pages/8e7339/" class="sidebar-link">Kubernetes（k8s） YAML文件详解</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>harbor</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nexus</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jenkins</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>elasticsearch</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/pages/d8680d/" class="sidebar-link">apache2.2升级2.4</a></li><li><a href="/pages/97d233/" class="sidebar-link">heredoc（cat EOF）</a></li><li><a href="/pages/a1f982/" class="sidebar-link">Rocky linux 9 初始化</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/ops/#运维" data-v-06225672>运维</a></li><li data-v-06225672><a href="/ops/#kubernetes" data-v-06225672>kubernetes</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>小刘</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-07-25</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">kubernetes基础概念-Pod<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="kubernetes基础概念-pod"><a href="#kubernetes基础概念-pod" class="header-anchor">#</a> kubernetes基础概念-Pod</h1> <h2 id="_1-pod概念"><a href="#_1-pod概念" class="header-anchor">#</a> 1. Pod概念</h2> <blockquote><p><strong>Pod</strong> 是可以在 Kubernetes 中创建和管理的、最小的可部署的计算单元。是一组（一个或多个） <a href="https://kubernetes.io/zh-cn/docs/concepts/containers/" target="_blank" rel="noopener noreferrer">容器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>； 这些容器共享存储、网络、以及怎样运行这些容器的声明。</p></blockquote> <p>  简单来说，Pod就是Kubernetes里的“应用“；而一个应用可以由多个容器组成。而每一个Pod可以共享同一个命名空间，如：</p> <ul><li><p><strong>Mount namespaces</strong>（挂载命名空间）</p></li> <li><p><strong>Network namespaces</strong>（网络命名空间）</p></li> <li><p><strong>UTS namespaces</strong>（主机名命名空间）</p></li> <li><p><strong>IPC namespaces</strong>（进程间通信命名空间）</p></li> <li><p><strong>PID namespaces</strong>（进程ID命名空间）</p></li> <li><p><strong>User namespaces</strong>（用户命名空间）</p></li></ul> <p>  通过共享不同的命名空间，让每个Pod总是一起运行在<strong>同一个工作节点</strong>上。而每个Pod就像一个独立的逻辑机器，拥有自己的IP、主机名、进程等，并包含一个或多个容器，每个容器都运行一个应用进程。</p> <h2 id="_2-为什么需要pod"><a href="#_2-为什么需要pod" class="header-anchor">#</a> 2. 为什么需要Pod</h2> <p>  首先需要了解一个概念，<strong>容器是一个“单进程”模型</strong>。一个正在运行的Docker容器，其实就是一个启用了多个Linux Namespace的应用进程，而这个进程能够使用的资源量，则受Cgroups配置的限制。</p> <p>  由于一个容器的本质就是一个进程，用户的应用进程实际上就是容器里PID=1的进程，也是其他后续创建的所有进程的父进程。这就意味着，在一个容器中，你没办法同时运行两个不同的应用，除非你能事先找到一个公共的PID=1的程序来充当两个不同应用的父进程。</p> <p>  容器本身设计之初就是希望容器和应用能够<strong>同生命周期</strong>，否则，一旦出现类似于“容器是正常运行的，但是里面的应用早已经挂了”的情况就很麻烦了。</p> <p>  而在真正的操作系统中，进程并不是单打独斗的，而是以进程组（线程组）的方式存在，可以登录到一台Linux服务器执行如下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>pstree <span class="token parameter variable">-g</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>  这条命令的作用，是展示当前系统中正在运行的进程的树状结构，返回结果如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemd(1)-+-accounts-daemon(1984)-+-{gdbus}(1984)
           | `-{gmain}(1984)
           |-acpid(2044)
          ...      
           |-lxcfs(1936)-+-{lxcfs}(1936)
           | `-{lxcfs}(1936)
           |-mdadm(2135)
           |-ntpd(2358)
           |-polkitd(2128)-+-{gdbus}(2128)
           | `-{gmain}(2128)
           |-rsyslogd(1632)-+-{in:imklog}(1632)
           |  |-{in:imuxsock) S 1(1632)
           | `-{rs:main Q:Reg}(1632)
           |-snapd(1942)-+-{snapd}(1942)
           |  |-{snapd}(1942)
           |  |-{snapd}(1942)
           |  |-{snapd}(1942)
           |  |-{snapd}(1942)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>  比如，这里有一个叫作rsyslogd的程序，它负责的是Linux操作系统里的日志处理。可以看到，rsyslogd的主程序main，和它要用到的内核日志模块imklog，imuxsock等，同属于1632进程组。这些进程相互协作，共同完成rsyslogd程序的职责。这三个进程一定要运行在同一台机器上，否则，它们之间基于Socket的通信和文件交换，都会出现问题。</p> <p>  所以，Google工程师提出了Pod的概念，通过以Pod为原子调度单位解决了两个问题：</p> <ol><li>进程组通信问题：进程互相之间会发生直接的文件交换、使用localhost或者Socket文件进行本地通信、会发生非常频繁的远程调用、需要共享某些Linux Namespace等等。</li> <li>成组资源调度问题：如果以容器的“单进程”模型来看，为了保证进程的真实可用性，这三个进程就需要分为三个容器，同时三个容器必须要工作到同一个节点才可以正常使用。假设每个容器需要的资源是1GB，node01剩余内存有3GB，node02剩余内存有2.5GB，而最开始的时候有两个容器同时调度到了node02节点，但是进行imuxsock容器调度的时候发现，node02可用资源只有0.5 GB了，并不足以运行imuxsock容器，但是imuxsock容器又必须调度到node02节点上，这就是一个成组调度没有被妥善处理的例子。</li></ol> <p>  而Pod内为了使用同一个namespace，就必须有一个中间容器起到“Hold”住namespace的作用，否则Pod中的多个容器就不是对等关系，而是拓扑关系了。</p> <p>  所以，在Kubernetes项目里，Pod的实现需要使用一个中间容器，这个容器叫作<strong>Infra容器</strong>。在这个Pod中，Infra容器永远都是第一个被创建的容器，而其他用户定义的容器，则通过Join Network Namespace的方式，与Infra容器关联在一起。</p> <div class="center-container"><p><img src="https://static.xiaoliutalk.cn/img/202307261701735.jpeg" alt=""></p></div><p>在Kubernetes项目里，Infra容器一定要占用极少的资源，所以它使用的是一个非常特殊的镜像，叫作：<code>registry.k8s.io/pause</code>。这个镜像是一个用汇编语言编写的、永远处于“暂停”状态的容器，解压后的大小也只有100~200 KB左右。</p> <p>在Infra容器“Hold住”Namespace后，用户容器就可以加入到Infra容器的Namespace当中了。</p> <h2 id="_3-pod使用"><a href="#_3-pod使用" class="header-anchor">#</a> 3. Pod使用</h2> <h3 id="_3-1-创建pod"><a href="#_3-1-创建pod" class="header-anchor">#</a> 3.1. 创建Pod</h3> <p>在生产环境中，很少单独运行一个Pod，因为单独创建的Pod并不能实现一些高级的发布策略，所以在实际使用中经常会用<strong>Deployment</strong>、<strong>DaemonSet</strong>、<strong>StatefulSet</strong>等高级控制器调度并管理Pod。我们有时候也会单独启动一个Pod用于测试业务等，新建 <code>nginx.yml</code> 如下：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1                             <span class="token comment"># 必选，API的版本号</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod	                               <span class="token comment"># 必选，类型Pod</span>
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>	                               <span class="token comment"># 必选，元数据</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx	                           <span class="token comment"># 必选，符合RFC 1035规范的Pod名称</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> web<span class="token punctuation">-</span>testing                   <span class="token comment"># 可选，不指定默认为default，Pod所在的命名空间，命令行中可以使用 -n 指定命名空间</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>	                               <span class="token comment"># 可选，标签选择器，一般用于Selector</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx               
    <span class="token key atrule">role</span><span class="token punctuation">:</span> frontend                       <span class="token comment"># 可选，标签，可以写多个</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>	                         <span class="token comment"># 可选，注释列表</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx               
<span class="token key atrule">spec</span><span class="token punctuation">:</span>	                                   <span class="token comment"># 必选，用于定义容器的详细信息</span>
  <span class="token key atrule">restartPolicy</span><span class="token punctuation">:</span> Always	                 <span class="token comment"># 可选，容器重启策略，默认为Always</span>
  <span class="token key atrule">os</span><span class="token punctuation">:</span> 
    <span class="token key atrule">name</span><span class="token punctuation">:</span> linux                          <span class="token comment"># 可选，希望 Pod 运行在哪个操作系统之上</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>	                           <span class="token comment"># 必选，容器列表</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx	                         <span class="token comment"># 必选，符合RFC 1035规范的容器名称</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>latest	                 <span class="token comment"># 必选，容器所用的镜像的地址</span>
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> Always	             <span class="token comment"># 可选，镜像拉取策略</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span>           
      <span class="token punctuation">-</span> nginx	                           <span class="token comment"># 可选，容器启动执行的命令</span>
      <span class="token punctuation">-</span> <span class="token punctuation">-</span>g 
      <span class="token punctuation">-</span> <span class="token string">&quot;daemon off;&quot;</span> 
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>	                         <span class="token comment"># 可选，资源限制和资源请求限制</span>
      <span class="token key atrule">limits</span><span class="token punctuation">:</span>	                           <span class="token comment"># 最大限制设置</span>
        <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 500m                        <span class="token comment"># 一个CPU等于1个物理CPU核或者1个虚拟核，0.1等价于100m</span>
        <span class="token key atrule">memory</span><span class="token punctuation">:</span> 512Mi                    <span class="token comment"># 可以使用以数量为后缀，如G、M、k，也可使用2的幂数，如Gi、Mi、Ki</span>
      <span class="token key atrule">requests</span><span class="token punctuation">:</span>	                         <span class="token comment"># 可选，启动所需的资源</span>
        <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 100m  
        <span class="token key atrule">memory</span><span class="token punctuation">:</span> 128Mi  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>使用kubectl apply命令从YAML文件创建Pod：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> nginx.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看pod的运行状态：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get pod nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-2-pod的状态"><a href="#_3-2-pod的状态" class="header-anchor">#</a> 3.2. Pod的状态</h3> <h4 id="_3-2-1-phase"><a href="#_3-2-1-phase" class="header-anchor">#</a> 3.2.1. Phase</h4> <p>和裸容器部署一样，Pod在运行时也会有不同的状态，Pod的状态信息保存在PodStatus对象中，在PodStatus中有一个<strong>Phase</strong>字段，用于描述Pod在其生命周期中的不同状态。</p> <p>通常情况下，在 Pod 的生命周期中，每个 Pod 会处于 5 个不同的 phase：<strong>pending</strong>，<strong>running</strong>，<strong>succeed</strong>，<strong>failed</strong>，<strong>unknown</strong>。</p> <table><thead><tr><th>状态</th> <th>说明</th></tr></thead> <tbody><tr><td>Pending（挂起）</td> <td>Pod 已被 Kubernetes 系统接收，但仍有一个或多个容器未被创建，可以通过 kubectl describe 查看处于 Pending 状态的原因</td></tr> <tr><td>Running（运行中）</td> <td>Pod 已经被绑定到一个节点上，并且所有的容器都已经被创建，而且至少有一个是运行状态，或者是正在启动或者重启，可以通过 kubectl logs 查看 Pod 的日志</td></tr> <tr><td>Succeeded（成功）</td> <td>所有容器执行成功并终止，并且不会再次重启，可以通过 kubectl logs 查看 Pod日志</td></tr> <tr><td>Failed（失败）</td> <td>所有容器都已终止，并且至少有一个容器以失败的方式终止，也就是说这个容器要么以非零状态退出，要么被系统终止，可以通过 logs 和 describe 查看 Pod 日志和状态</td></tr> <tr><td>Unknown（未知）</td> <td>通常是由于通信问题造成的无法获得 Pod 的状态</td></tr></tbody></table> <p>可以通过命令查看：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl get pods nginx <span class="token parameter variable">-o</span> yaml <span class="token operator">|</span> <span class="token function">grep</span> phase
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>以下是一些常见的导致pod处于上述状态的原因：</p> <table><thead><tr><th>状态</th> <th>说明</th></tr></thead> <tbody><tr><td>ImagePullBackOff ErrImagePull</td> <td>镜像拉取失败，一般是由于镜像不存在、网络不通或者需要登录认证引起的，可以使用 kubectl  describe 命令查看具体原因</td></tr> <tr><td>CrashLoopBackOff</td> <td>容器启动失败，可以通过 logs 命令查看具体原因，一般为启动命令不正确，健康检查不通过等</td></tr> <tr><td>OOMKilled</td> <td>容器内存溢出，一般是容器的内存 Limit 设置的过小，或者程序本身有内存溢出，可以通过 kubectl logs 查看程序启动日志</td></tr> <tr><td>Terminating</td> <td>Pod 正在被删除，可以通过 kubectl describe 查看状态</td></tr> <tr><td>SysctlForbidden</td> <td>Pod 自定义了内核配置，但 kubelet 没有添加内核配置或配置的内核参数不支持，可以通过 kubectl describe 查看具体原因</td></tr> <tr><td>Completed</td> <td>容器内部主进程退出，一般计划任务执行结束会显示该状态，此时可以通过 kubectl logs 查看容器日志</td></tr> <tr><td>ContainerCreating</td> <td>Pod 正在创建，一般为正在下载镜像，或者有配置不当的地方，可以通过 kubectl describe 查看具体原因</td></tr></tbody></table> <h4 id="_3-2-3-conditions"><a href="#_3-2-3-conditions" class="header-anchor">#</a> 3.2.3. Conditions</h4> <p>conditions用于描述Pod当前处于哪个phase，以及处于该phase的原因。及作为一个辅助手段，详细的展示 pod 的状态信息，用于问题排查分析时提供更多依据。在同一时间内，1个Pod可能处于多个conditions。</p> <table><thead><tr><th>状态</th> <th>说明</th></tr></thead> <tbody><tr><td>Initialized</td> <td>所有的 init containers 都已成功完成</td></tr> <tr><td>Ready</td> <td>只有 pod 中的所有 container 就绪，且 pod 的 readiness probe 也完成了，意味着 pod 可以对外提供服务了</td></tr> <tr><td>ContainersReady</td> <td>Pod 中所有容器都已就绪，但这并不意味着 Pod 也 ready</td></tr> <tr><td>PodScheduled</td> <td>Pod 已经被调度到某节点</td></tr></tbody></table> <p>可以通过命令查看：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl describe pod nginx <span class="token operator">|</span> <span class="token function">grep</span> Conditions: <span class="token parameter variable">-A</span> <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-3-pod的探针-健康检查"><a href="#_3-3-pod的探针-健康检查" class="header-anchor">#</a> 3.3. Pod的探针（健康检查）</h3> <p>在生产环境下，进程正常启动并不代表应用能正常处理请求，所以合理地设计应用的健康检查尤为重要。在使用裸机或者裸容器部署时，一般很难对应用做很完善的健康检查，而Pod提供的探针可以很方便地用来检测容器内的应用是否正常。目前探针有3种检测方式，可以根据不同的场景选择合适的健康检查方式。</p> <h4 id="_3-3-1-探测类型"><a href="#_3-3-1-探测类型" class="header-anchor">#</a> 3.3.1. 探测类型</h4> <p>目前支持的探测器类型有3种，可以选择性地对容器进行检测。</p> <table><thead><tr><th>种类</th> <th>说明</th></tr></thead> <tbody><tr><td>startupProbe</td> <td>Kubernetes1.16 新加的探测方式，用于判断容器内的应用程序是否已经启动。如果配置了 startupProbe，就会先禁用其他探测，直到它成功为止。如果探测失败，Kubelet会杀死容器，之后根据重启策略进行处理，如果探测成功，或没有配置 startupProbe，则状态为成功，之后就不再探测。</td></tr> <tr><td>livenessProbe</td> <td>用于探测容器是否在运行，如果探测失败，kubelet 会“杀死”容器并根据重启策略进行相应的处理。如果未指定该探针，将默认为 Success</td></tr> <tr><td>readinessProbe</td> <td>一般用于探测容器内的程序是否健康，即判断容器是否为就绪（Ready）状态。如果是，则可以处理请求，反之Endpoints Controller 将从所有的 Service 的Endpoints中删除此容器所在 Pod 的IP 地址。如果未指定，将默认为 Success</td></tr></tbody></table> <p><strong>startupProbe</strong></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>    <span class="token key atrule">startupProbe</span><span class="token punctuation">:</span>
      <span class="token key atrule">tcpSocket</span><span class="token punctuation">:</span>	                       <span class="token comment"># 端口检查方式</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">60</span>	           <span class="token comment"># 可选，容器启动后要等待多少秒后才启动探针检测</span>
      <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>	                 <span class="token comment"># 可选，执行探测的时间间隔，默认是 10 秒。最小值是 1</span>
      <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">2</span>	                 <span class="token comment"># 可选，探针超时后等待多少秒</span>
      <span class="token key atrule">successThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>                <span class="token comment"># 可选，检查成功为1次表示就绪</span>
      <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>                <span class="token comment"># 可选，检测失败1次表示未就绪</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>livenessProbe</strong></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>    <span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span>	                     
      <span class="token key atrule">exec</span><span class="token punctuation">:</span>	                             
        <span class="token key atrule">command</span><span class="token punctuation">:</span> 
        <span class="token punctuation">-</span> cat
        <span class="token punctuation">-</span> /etc/hosts
      <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">60</span>	           <span class="token comment"># 可选，容器启动后要等待多少秒后才启动探针检测</span>
      <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>	                 <span class="token comment"># 可选，执行探测的时间间隔，默认是 10 秒。最小值是 1</span>
      <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">2</span>	                 <span class="token comment"># 可选，探针超时后等待多少秒</span>
      <span class="token key atrule">successThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>                <span class="token comment"># 可选，检查成功为1次表示就绪</span>
      <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>                <span class="token comment"># 可选，检测失败1次表示未就绪</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>readinessProbe</strong></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>    <span class="token key atrule">readinessProbe</span><span class="token punctuation">:</span>	                     
      <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>	                         <span class="token comment"># </span>
        <span class="token key atrule">scheme</span><span class="token punctuation">:</span> HTTP                     <span class="token comment"># 设置连接主机的协议，默认是HTTP</span>
        <span class="token key atrule">path</span><span class="token punctuation">:</span> /_health
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
        <span class="token key atrule">httpHeaders</span><span class="token punctuation">:</span>                     <span class="token comment"># 可选，自定义请求中的HTTP头</span>
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> end<span class="token punctuation">-</span>user
            <span class="token key atrule">value</span><span class="token punctuation">:</span> jason
      <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">60</span>	           <span class="token comment"># 可选，容器启动后要等待多少秒后才启动探针检测</span>
      <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>	                 <span class="token comment"># 可选，执行探测的时间间隔，默认是 10 秒。最小值是 1</span>
      <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">2</span>	                 <span class="token comment"># 可选，探针超时后等待多少秒</span>
      <span class="token key atrule">successThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>                <span class="token comment"># 可选，检查成功为1次表示就绪</span>
      <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>                <span class="token comment"># 可选，检测失败1次表示未就绪</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_3-3-2-检查机制"><a href="#_3-3-2-检查机制" class="header-anchor">#</a> 3.3.2. 检查机制</h4> <table><thead><tr><th>实现方式</th> <th>说明</th></tr></thead> <tbody><tr><td>exec</td> <td>在容器内执行一个指定的命令，如果命令返回值为 0，则认为容器健康</td></tr> <tr><td>tcpSocket</td> <td>通过 TCP 连接检查容器指定的端口，如果端口开放，则认为容器健康</td></tr> <tr><td>httpGet</td> <td>对指定的URL 进行 Get 请求，如果状态码在 200~400 之间，则认为容器健康</td></tr> <tr><td>grpc</td> <td>使用 <a href="https://grpc.io/" target="_blank" rel="noopener noreferrer">gRPC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 执行一个远程过程调用。如果响应的状态是 &quot;SERVING&quot;，则认为容器健康</td></tr></tbody></table> <p>需要注意的是，<strong>同一种探测类型中只能实现一种检查机制</strong>。</p> <p>前三种已经在探测类型中演示，这里不再赘述。</p> <p><strong>grpc</strong></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>    <span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span>	                     
      <span class="token key atrule">grpc</span><span class="token punctuation">:</span>	                             <span class="token comment"># grpc检查方式</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">2379</span>
      <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">60</span>	           <span class="token comment"># 可选，容器启动后要等待多少秒后才启动探针检测</span>
      <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>	                 <span class="token comment"># 可选，执行探测的时间间隔，默认是 10 秒。最小值是 1</span>
      <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">2</span>	                 <span class="token comment"># 可选，探针超时后等待多少秒</span>
      <span class="token key atrule">successThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>                <span class="token comment"># 可选，检查成功为1次表示就绪</span>
      <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">1</span>                <span class="token comment"># 可选，检测失败1次表示未就绪</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-3-3-探测结果"><a href="#_3-3-3-探测结果" class="header-anchor">#</a> 3.3.3. 探测结果</h4> <table><thead><tr><th>状态</th> <th>说明</th></tr></thead> <tbody><tr><td>Success（成功）</td> <td>容器通过检测</td></tr> <tr><td>Failure（失败）</td> <td>容器检测失败</td></tr> <tr><td>Unknown（未知）</td> <td>诊断失败，不采取任何措施</td></tr></tbody></table> <h3 id="_3-4-镜像拉取策略和pod恢复策略"><a href="#_3-4-镜像拉取策略和pod恢复策略" class="header-anchor">#</a> 3.4. 镜像拉取策略和Pod恢复策略</h3> <h4 id="_3-4-1-镜像拉取策略"><a href="#_3-4-1-镜像拉取策略" class="header-anchor">#</a> 3.4.1. 镜像拉取策略</h4> <p>可以使用 <code>.spec.containers[].imagePullPolicy</code> 指定镜像的拉取策略</p> <table><thead><tr><th>操作方式</th> <th>说明</th></tr></thead> <tbody><tr><td>Always</td> <td>总是拉取，当tag为latest时，默认为Always</td></tr> <tr><td>Never</td> <td>无论是否存在都不拉取</td></tr> <tr><td>IfNotPresent</td> <td>镜像不存在时拉取</td></tr></tbody></table> <h4 id="_3-4-2-pod恢复策略"><a href="#_3-4-2-pod恢复策略" class="header-anchor">#</a> 3.4.2. Pod恢复策略</h4> <p>可以使用 <code>.spec.restartPolicy</code> 指定Pod的恢复策略</p> <table><thead><tr><th>操作方式</th> <th>说明</th></tr></thead> <tbody><tr><td>Always</td> <td><strong>默认策略</strong>。容器失效时，自动重启该容器</td></tr> <tr><td>OnFailure</td> <td>容器以不为 0 的状态码终止，自动重启该容器</td></tr> <tr><td>Never</td> <td>无论何种状态，都不会重启</td></tr></tbody></table> <p>这里我们新创建一个Pod进行演示：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">test</span><span class="token punctuation">:</span> liveness
  <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>liveness<span class="token punctuation">-</span>exec
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> liveness
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /bin/sh
    <span class="token punctuation">-</span> <span class="token punctuation">-</span>c
    <span class="token punctuation">-</span> touch /tmp/healthy; sleep 30; rm <span class="token punctuation">-</span>rf /tmp/healthy; sleep 600
    <span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span>
      <span class="token key atrule">exec</span><span class="token punctuation">:</span>
        <span class="token key atrule">command</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> cat
        <span class="token punctuation">-</span> /tmp/healthy
      <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>在这个Pod中，它在启动之后做的第一件事，就是在/tmp目录下创建了一个healthy文件，以此作为自己已经正常运行的标志。而30s过后，它会把这个文件删除掉。</p> <p>与此同时，我们定义了一个这样的livenessProbe（健康检查）。它的类型是exec，这意味着，它会在容器启动后，在容器里面执行一条我们指定的命令，比如：<code>cat /tmp/healthy</code>。这时，如果这个文件存在，这条命令的返回值就是0，Pod就会认为这个容器不仅已经启动，而且是健康的。这个健康检查，在容器启动5s后开始执行（initialDelaySeconds: 5），每5s执行一次（periodSeconds: 5）。</p> <p>创建这个Pod，并查看Pod的状态：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>kubectl create <span class="token parameter variable">-f</span> test-liveness-exec.yaml
<span class="token function">sleep</span> <span class="token number">20</span>
kubectl get pod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="center-container"><p><img src="https://static.xiaoliutalk.cn/img/202308021623328.png" alt=""></p></div><p>等待30s后，再次查看Pod的状态：</p> <div class="center-container"><p><img src="https://static.xiaoliutalk.cn/img/202308021151785.png" alt=""></p></div><p>30s后，我们删除了/tmp/healthy，健康检查探查到/tmp/healthy已经不存在了，但是Pod还是保持着Running的状态，而在这个过程中，Pod为什么保持Running状态不变呢？</p> <p>我们看到RESTARTS字段变为了1，表示异常的容器已经被kubernetes重启了，而这个过程中，Pod保持Running状态不变。</p> <p>而针对这种情况，只需要记住两个基本的设计原理：</p> <ol><li><strong>只要Pod的restartPolicy指定的策略允许重启异常的容器（比如：Always），那么这个Pod就会保持Running状态，并进行容器重启</strong>。否则，Pod就会进入Failed状态 。</li> <li><strong>对于包含多个容器的Pod，只有它里面所有的容器都进入异常状态后，Pod才会进入Failed状态</strong>。在此之前，Pod都是Running状态。此时，Pod的READY字段会显示正常容器的个数。</li></ol> <h3 id="_3-5-容器生命周期回调"><a href="#_3-5-容器生命周期回调" class="header-anchor">#</a> 3.5. 容器生命周期回调</h3> <p>容器生命周期回调，指的是在容器发生状态变化时，需要触发的一系列 &quot;动作&quot;。</p> <p>参考 <a href="https://kubernetes.io/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/" target="_blank" rel="noopener noreferrer">Attach Handlers to Container Lifecycle Events<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th>种类</th> <th>说明</th></tr></thead> <tbody><tr><td>postStart</td> <td>容器创建后立即执行，注意由于是异步执行，它无法保证一定在 ENTRYPOINT 之前运行。如果失败，容器会被杀死，并根据 RestartPolicy 决定是 否重启</td></tr> <tr><td>preStop</td> <td>容器终止前执行，常用于资源清理。执行完成之后容器将成功终止，如果失败，容器同样也会被杀死。在其完成之前 会阻塞删除容器的操作</td></tr></tbody></table> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> lifecycle<span class="token punctuation">-</span>demo
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> lifecycle<span class="token punctuation">-</span>demo<span class="token punctuation">-</span>container
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">lifecycle</span><span class="token punctuation">:</span>
      <span class="token key atrule">postStart</span><span class="token punctuation">:</span>
        <span class="token key atrule">exec</span><span class="token punctuation">:</span>
          <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/bin/sh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;echo Hello from the postStart handler &gt; /usr/share/message&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">preStop</span><span class="token punctuation">:</span>
        <span class="token key atrule">exec</span><span class="token punctuation">:</span>
          <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/bin/sh&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;-c&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;nginx -s quit; while killall -0 nginx; do sleep 1; done&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>官方给出的文档中，使用了postStart和preStop命令，postStart在容器启动时输出了 echo Hello from the postStart handler 到message文件，而preStop实现了nginx的优雅退出。</p> <p>需要注意的是，preStop会阻塞容器的结束流程，直到 &quot;动作&quot; 顺利完成后，才会允许容器结束。</p> <p>参考文章及书籍：</p> <ul><li><a href="https://coolshell.cn/articles/17010.html" target="_blank" rel="noopener noreferrer">DOCKER基础技术：LINUX NAMESPACE（上）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://coolshell.cn/articles/17029.html" target="_blank" rel="noopener noreferrer">DOCKER基础技术：LINUX NAMESPACE（下）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://product.dangdang.com/29222386.html" target="_blank" rel="noopener noreferrer">深入剖析Kubernetes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/rexcheny/p/11017146.html" target="_blank" rel="noopener noreferrer">同一个POD中默认共享哪些名称空间<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/05/11, 11:55:33</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/4593b8/" class="prev">kubernetes架构解析</a></span> <span class="next"><a href="/pages/e33737/">kubernetes调度基础</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/82c021/"><div>
            kubernetes控制器-Service
            <!----></div></a> <span class="date">08-18</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/d5cb3c/"><div>
            kubernetes控制器-Deployment
            <!----></div></a> <span class="date">08-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/e33737/"><div>
            kubernetes调度基础
            <!----></div></a> <span class="date">07-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:248920070@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xiaoliutalk" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/xiaoliuTalk" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span><a href="https://ipw.cn/ipv6webcheck/?site=www.xiaoliutalk.cn" title="本站支持IPv6访问" target="_blank"><img style="display:inline-block;vertical-align:middle" alt="本站支持IPv6访问" src="https://static.ipw.cn/icon/ipv6-s3.svg"></a>         <a href="https://ipw.cn/ssl/?site=www.xiaoliutalk.cn" title="本站支持SSL安全访问" target="_blank"><img style="display:inline-block;vertical-align:middle" alt="本站支持SSL安全访问" src="https://static.ipw.cn/icon/ssl-s3.svg"></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:10px;bottom:0px;width:135px;height:200px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="200" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:200px;"></canvas></div><div></div></div></div>
    <script src="/assets/js/app.44d32a86.js" defer></script><script src="/assets/js/3.5c73636d.js" defer></script><script src="/assets/js/2.db635a7e.js" defer></script><script src="/assets/js/49.ecb5c6e0.js" defer></script>
  </body>
</html>
